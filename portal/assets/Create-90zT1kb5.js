import{e as D,j as A,o as i,A as m,B as u,E as S,l as s,u as r,b as a,D as c,k as f,H as $,F as _,G as B,T as g,N as I}from"./vue.esm-bundler-CYPfFjdk.js";import{R as K}from"./RightDrawer-Lpr6admO.js";import{a as O,e as R}from"./preview-D0Pi-YKn.js";import{I as F}from"./IconClose-tbzieUCA.js";import{P as y}from"./ProgressSpinner-lCLkagxy.js";import{_ as j,a as E}from"./ActionErrorAlert--bGVRXV4.js";import{_ as L,a as n,b as T,c as z,d as G}from"./VPermissionMultiSelect-BVjzMLzi.js";import{_ as H}from"./VDepartmentMultiSelect-o-LqVwHz.js";import{_ as M}from"./VDepartmentSelect-fFgtBnGn.js";import"./_plugin-vue_export-helper-x3n3nnut.js";import"./chunk-UXHY756F-iEg6Hh0Y.js";import"./index-C1vJkiWb.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./vue-router-E7v71uM3.js";import"./preview-errors-7FWlPnjy.js";import"./index-PPLHz8o0.js";import"./schemas-74JEr9Jm.js";import"./index-LmGWO5sK.js";import"./routes-WhYxSpGG.js";import"./models-qWR1FMGP.js";import"./PDays-npMhi6Nw.js";import"./index-baqd9Qr3.js";import"./index-TCXC35p5.js";import"./index-05uTbNHo.js";import"./PPopoverPanel-RNuJphX8.js";import"./headlessui-float-sqR0azf2.js";import"./transition-qpXhaAaU.js";import"./keyboard-64MH3N5t.js";import"./open-closed-nhb_Ydho.js";import"./use-root-containers-gEPBKDr2.js";import"./use-resolve-button-type-49aRxFpo.js";import"./iframe-ufxlS10p.js";import"../sb-preview/runtime.js";import"./query-G1AwWss6.js";import"./ChevronDownIcon-AgxEjrtE.js";import"./listbox-3RN1mHPV.js";import"./form-TGXPuq_M.js";import"./DepartureList-w5NrqMJ9.js";import"./DepartureAssignStaffAndVehicles-8AoBdfT8.js";import"./api-B2HcjM2j.js";import"./api-cJzoLyfI.js";import"./PButton-h9_xezBg.js";import"./index-VqpYtbVe.js";import"./PInput-iZb_REtl.js";import"./POverlay-3jPNvx4x.js";import"./PSpinner-cF72MsvC.js";import"./IconBus-0QPjtZ9u.js";import"./IconPerson-i3ljUCnk.js";import"./SuggestedUser-4kWsZiWj.js";import"./PAvatar-wq6oK0Zr.js";import"./PlusCircleIcon-aSiXn_Mr.js";import"./SuggestedVehicle-r1TyKt-D.js";import"./ScheduledUser-esbe3tjU.js";import"./VehicleTitle-0pOySBND.js";import"./XMarkIcon-_tXc_TyD.js";import"./PPhoneLink-wKLYRG_F.js";import"./PAlert-quHLeqTA.js";import"./CheckCircleIcon-akbq8cGf.js";import"./XMarkIcon-t43a1P5Z.js";import"./PDialogTitle-rfxNVwSR.js";import"./description-LPuBJoU_.js";import"./DepartureListItem-I88AIHqM.js";import"./DepartureUpdateComment-2rt04tFb.js";import"./PTextarea-Wrr33MR5.js";import"./DepartureUpdateCommentPopover-euFlcGix.js";import"./DepartureUpdateStatus-zdhd3wV8.js";import"./PListboxLabel-U39qo3cm.js";import"./CheckIcon-WRJIoum8.js";import"./lib-Fy6oBlQ3.js";import"./PToggle-mLVcOzrp.js";import"./PRadio-sGATo2dT.js";import"./index-bhXQ3okY.js";import"./isNativeReflectConstruct-ubdnbphT.js";import"./mock-vjhcKIQW.js";import"./index-1aVAeLWL.js";import"./mock-UR5nntqf.js";import"./mock-CzN7Q16W.js";import"./mock-YoOI-P8k.js";import"./mock-psFphV_9.js";import"./mock-OgPWcINV.js";import"./IconTickMarkCircle-2_sKm8Jk.js";import"./useRole-JNprELZd.js";import"./FeedbackWarning-iVsjxw1W.js";import"./IconAlert-B2oaG4cc.js";import"./IconAccount-3MIbJHaP.js";import"./useHelpers-Uc_HlRzD.js";import"./useAbility-sIzGf7dM.js";import"./useDepartment-RZahlhen.js";import"./useOperationalBase-kvvO22e1.js";import"./useAuth-8d_1_S6I.js";const h={firstName:"",lastName:"",email:"",profilePhotoSrc:"",profilePhotoDbPath:"",contactNumber:"",kennitala:"",bankAccountNumber:"",departments:[],nextOfKinName:"",nextOfKinContactNumber:"",startDate:"",operationalBases:[],roles:[],abilities:[],permissions:[]},q={class:"isolate flex flex-col items-center justify-center border-l bg-white pb-6"},J={class:"sticky top-0 z-10 flex w-full items-center justify-end bg-white p-6"},Q={class:"w-full space-y-8 divide-y divide-gray-200 px-6 md:px-12"},W={class:"space-y-8 divide-y divide-gray-200"},X=s("div",null,[s("h3",{class:"text-base font-semibold leading-6 text-gray-900"}," Add a new staff member. "),s("p",{class:"mt-1 text-sm text-gray-500"}," Complete the form below to add a new staff member to the Portal. ")],-1),Y={class:"mt-6 grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-6"},Z={class:"sm:col-span-6"},ee={class:"pt-8"},te=s("h3",{class:"text-base font-semibold leading-6 text-gray-900"}," Personal Information ",-1),oe={class:"mt-6 grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-6"},se={class:"sm:col-span-3"},ae={class:"sm:col-span-3"},le={class:"sm:col-span-3"},ie={class:"sm:col-span-3"},re={class:"sm:col-span-3"},ne={class:"sm:col-span-3"},me={class:"sm:col-span-3"},de={class:"sm:col-span-3"},pe={class:"sm:col-span-3"},ue={class:"pt-8"},ce=s("h3",{class:"text-base font-semibold leading-6 text-gray-900"}," Departments, Roles & Abilities ",-1),fe={class:"mt-6 space-y-6"},ve={key:0},be={class:"relative pt-5"},_e={class:"flex items-center justify-end"},ge={class:"flex items-center"},ye={key:0},he=D({__name:"Create",setup(xe){const{actionIsInProgress:b,actionIsInError:x,actionIsInSuccess:U}=O(),{createUser:N,userActions:d}=R(),e=A({...h}),V=l=>{e.value.profilePhotoSrc=l.src,e.value.profilePhotoDbPath=l.db_path},k=async()=>{try{await N(e.value),e.value={...h}}catch(l){console.log(l)}},P=l=>{e.value.departments.forEach(t=>{t.primary=t.id===l.id})},w=()=>{e.value.roles=e.value.roles.filter(l=>e.value.departments.some(t=>t.id===l.department.id))},C=()=>{e.value.abilities=e.value.abilities.filter(l=>e.value.departments.some(t=>{var p;return t.id===((p=l.department)==null?void 0:p.id)}))};return(l,t)=>{const p=S("RouterLink");return i(),m(K,null,{default:u(()=>[s("div",q,[s("div",J,[r(b)(r(d).getAllAbilities)?(i(),m(y,{key:0,class:"h-5 w-5 text-blue-500"})):(i(),m(p,{key:1,to:{name:l.$Routes.Staff}},{default:u(()=>[a(F,{class:"h-5 w-5 fill-red-400"})]),_:1},8,["to"]))]),s("form",Q,[s("div",W,[s("div",null,[X,s("div",Y,[s("div",Z,[a(L,{label:"Profile Photo","image-storage-directory":"profile_photos","default-image-src":e.value.profilePhotoSrc,onFileUploaded:V},null,8,["default-image-src"])])])]),s("div",ee,[te,s("div",oe,[s("div",se,[a(n,{modelValue:e.value.firstName,"onUpdate:modelValue":t[0]||(t[0]=o=>e.value.firstName=o),label:"First Name"},null,8,["modelValue"])]),s("div",ae,[a(n,{modelValue:e.value.lastName,"onUpdate:modelValue":t[1]||(t[1]=o=>e.value.lastName=o),label:"Last Name"},null,8,["modelValue"])]),s("div",le,[a(n,{modelValue:e.value.email,"onUpdate:modelValue":t[2]||(t[2]=o=>e.value.email=o),label:"Email",type:"email"},null,8,["modelValue"])]),s("div",ie,[a(n,{modelValue:e.value.contactNumber,"onUpdate:modelValue":t[3]||(t[3]=o=>e.value.contactNumber=o),label:"Contact Number"},null,8,["modelValue"])]),s("div",re,[a(n,{modelValue:e.value.kennitala,"onUpdate:modelValue":t[4]||(t[4]=o=>e.value.kennitala=o),label:"Kennitala"},null,8,["modelValue"])]),s("div",ne,[a(n,{modelValue:e.value.bankAccountNumber,"onUpdate:modelValue":t[5]||(t[5]=o=>e.value.bankAccountNumber=o),label:"Bank Account #"},null,8,["modelValue"])]),s("div",me,[a(n,{modelValue:e.value.startDate,"onUpdate:modelValue":t[6]||(t[6]=o=>e.value.startDate=o),label:"Start Date",type:"date"},null,8,["modelValue"])]),s("div",de,[a(n,{modelValue:e.value.nextOfKinName,"onUpdate:modelValue":t[7]||(t[7]=o=>e.value.nextOfKinName=o),label:"Next of Kin: Name"},null,8,["modelValue"])]),s("div",pe,[a(n,{modelValue:e.value.nextOfKinContactNumber,"onUpdate:modelValue":t[8]||(t[8]=o=>e.value.nextOfKinContactNumber=o),label:"Next of Kin: Contact Number"},null,8,["modelValue"])])])]),s("div",ue,[ce,s("div",fe,[a(H,{"selected-departments":e.value.departments,"onUpdate:selectedDepartments":t[9]||(t[9]=o=>e.value.departments=o),"selected-operational-bases":e.value.operationalBases,"onUpdate:selectedOperationalBases":t[10]||(t[10]=o=>e.value.operationalBases=o)},null,8,["selected-departments","selected-operational-bases"]),e.value.departments.length?(i(),m(M,{key:0,label:"Primary Department","department-options":e.value.departments,onUpdatePrimaryDepartment:P},null,8,["department-options"])):c("",!0),(i(!0),f(_,null,$(e.value.departments,o=>(i(),f(_,{key:o.id},[e.value.departments.length>1?(i(),f("h3",ve,B(o.name),1)):c("",!0),a(T,{"selected-roles":e.value.roles,"onUpdate:selectedRoles":t[11]||(t[11]=v=>e.value.roles=v),"department-filters":{dto:e.value.departments,department:o},onUpdateSelectedRoles:w},null,8,["selected-roles","department-filters"]),a(z,{"selected-abilities":e.value.abilities,"onUpdate:selectedAbilities":t[12]||(t[12]=v=>e.value.abilities=v),"department-filters":{dto:e.value.departments,department:o},onUpdateSelectedAbilities:C},null,8,["selected-abilities","department-filters"])],64))),128)),a(G,{"selected-permissions":e.value.permissions,"onUpdate:selectedPermissions":t[13]||(t[13]=o=>e.value.permissions=o),"department-filters":e.value.departments,onClearSelectedPermissions:t[14]||(t[14]=o=>e.value.permissions=[])},null,8,["selected-permissions","department-filters"])])])]),s("div",be,[s("div",_e,[a(g,{name:"alert"},{default:u(()=>[r(U)(r(d).createUser)?(i(),m(j,{key:0,action:r(d).createUser},null,8,["action"])):c("",!0)]),_:1}),a(g,{name:"alert"},{default:u(()=>[r(x)(r(d).createUser)?(i(),m(E,{key:0,action:r(d).createUser},null,8,["action"])):c("",!0)]),_:1}),s("div",ge,[s("button",{class:"ml-3 inline-flex h-9 items-center justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm focus:outline-none hover:bg-blue-700",onClick:I(k,["prevent"])},[r(b)(r(d).createUser)?(i(),m(y,{key:1,class:"h-3 w-3 text-white"})):(i(),f("span",ye," Save "))])])])])])])]),_:1})}}});he.__docgenInfo={exportName:"default",displayName:"Create",description:"",tags:{},sourceFiles:["D:/work/server/htdocs/aa-portal.is/src/pages/staff/Create.vue"]};export{he as default};
