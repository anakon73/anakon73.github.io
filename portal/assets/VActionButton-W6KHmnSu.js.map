{"version":3,"file":"VActionButton-W6KHmnSu.js","sources":["../../src/shared/ui/forms/VActionButton.vue"],"sourcesContent":["<script setup lang=\"ts\" generic=\"T\">\nimport { computed } from 'vue'\nimport ProgressSpinner from '@/shared/ui/ProgressSpinner.vue'\nimport type { AppPermissions } from '@/shared/types/enums/permissions/permissions'\nimport type { IDepartment } from '@/shared/types/departments/IDepartments'\nimport { useAuth } from '@/shared/api/useAuth'\n\nconst { userHasPermissionInDepartment } = useAuth()\n\ninterface IProps {\n  label: string\n  loading: boolean\n  disabled?: boolean\n  action: () => Promise<T | void>\n  permissionRequired?: {\n    permission: AppPermissions\n    department: IDepartment\n  } | null\n}\n\nconst {\n  loading = false,\n  disabled = false,\n  permissionRequired = null,\n} = defineProps<IProps>()\n\nconst actionIsPermitted = computed(() => {\n  if (permissionRequired) {\n    return userHasPermissionInDepartment(\n      permissionRequired.permission,\n      permissionRequired.department,\n    )\n  }\n  else {\n    return true\n  }\n})\n</script>\n\n<template>\n  <button\n    v-if=\"actionIsPermitted\"\n    class=\"relative mb-4 flex items-center justify-center rounded bg-blue-500 px-6 py-2 text-white transition focus:outline-blue-700 disabled:cursor-not-allowed disabled:opacity-75 hover:bg-blue-600 md:mb-0\"\n    :disabled=\"loading || disabled\"\n    @click.prevent=\"action\"\n  >\n    <span class=\"absolute inset-0 flex items-center justify-center\">\n      <ProgressSpinner\n        class=\"h-4 w-4 text-white transition duration-100\"\n        :class=\"[\n          { 'opacity-100': loading },\n          { 'opacity-0': !loading },\n        ]\"\n      />\n    </span>\n    <span\n      class=\"flex w-full items-center justify-center transition duration-100\"\n      :class=\"[\n        { 'opacity-100': !loading },\n        { 'opacity-0': loading },\n      ]\"\n    >\n      {{ label }}\n    </span>\n  </button>\n</template>\n"],"names":["userHasPermissionInDepartment","useAuth","actionIsPermitted","computed","__props"],"mappings":"odAOM,KAAA,CAAE,8BAAAA,GAAkCC,IAmBpCC,EAAoBC,EAAS,IAC7BC,EAAkB,mBACbJ,EACLI,qBAAmB,WACnBA,qBAAmB,UAAA,EAId,EAEV;;;"}