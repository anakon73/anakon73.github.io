{"version":3,"file":"DepartureUpdateComment-2rt04tFb.js","sources":["../../src/features/departure/update-comment/ui/form/DepartureUpdateComment.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { toRefs } from 'vue'\nimport { useCloned } from '@vueuse/core'\nimport { push } from 'notivue'\n\nimport { useScheduledDepartureUpdate } from '@/shared/api/scheduled-departure'\n\nimport { POverlay } from '@/shared/ui/POverlay'\nimport { PTextarea } from '@/shared/ui/PTextarea'\n\nimport type { DepartureUpdateCommentProps } from '../../types'\n\nconst props = defineProps<DepartureUpdateCommentProps>()\nconst { scheduledDepartureId, comment } = toRefs(props)\n\nconst emit = defineEmits<{ save: [] }>()\n\nconst { mutate, isPending } = useScheduledDepartureUpdate()\n\nconst { cloned: commentModel } = useCloned(comment)\n\nconst submit = () => {\n  mutate({\n    scheduledDepartureId: scheduledDepartureId.value,\n    comment: commentModel.value,\n  }, {\n    onSuccess: () => {\n      emit('save')\n\n      push.success({ message: 'Departure comment updated' })\n    },\n  })\n}\n</script>\n\n<template>\n  <POverlay :show=\"isPending\">\n    <form class=\"flex flex-col items-end space-y-2\" @submit.prevent=\"submit\">\n      <PTextarea v-model=\"commentModel\" rows=\"4\" />\n\n      <button\n        class=\"\n        select-none text-blue-500 transition-colors disabled:pointer-events-none\n        disabled:text-gray-700 hover:text-blue-800\n        \"\n        :disabled=\"commentModel === comment\"\n      >\n        Save changes\n      </button>\n    </form>\n  </POverlay>\n</template>\n"],"names":["props","__props","scheduledDepartureId","comment","toRefs","emit","__emit","mutate","isPending","useScheduledDepartureUpdate","commentModel","useCloned","submit","push"],"mappings":"wcAYA,MAAMA,EAAQC,EACR,CAAE,qBAAAC,EAAsB,QAAAC,CAAQ,EAAIC,EAAOJ,CAAK,EAEhDK,EAAOC,EAEP,CAAE,OAAAC,EAAQ,UAAAC,CAAU,EAAIC,EAA4B,EAEpD,CAAE,OAAQC,CAAa,EAAIC,EAAUR,CAAO,EAE5CS,EAAS,IAAM,CACZL,EAAA,CACL,qBAAsBL,EAAqB,MAC3C,QAASQ,EAAa,KAAA,EACrB,CACD,UAAW,IAAM,CACfL,EAAK,MAAM,EAEXQ,EAAK,QAAQ,CAAE,QAAS,2BAA6B,CAAA,CACvD,CAAA,CACD,CAAA"}