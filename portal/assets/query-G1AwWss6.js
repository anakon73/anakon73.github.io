var Ae=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var a=(e,t,r)=>(Ae(e,t,"read from private field"),r?r.call(e):t.get(e)),l=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},f=(e,t,r,s)=>(Ae(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r);var p=(e,t,r)=>(Ae(e,t,"access private method"),r);import{ae as qt,f as Lt,g as Dt,r as Ot,w as K,a5 as wt,z as St,a6 as Ct}from"./vue.esm-bundler-CYPfFjdk.js";import{S as Rt,t as _e,v as Yt,w as ot,x as ut,y as Zt,z as Ht,A as Jt,B as ct,D as Pt,F as dt,H as Gt,J as Xt,K as Ft,M as ke,N as Ut,O as P,T as Vt,c as J,Q as me,R as Xe,W as Ve}from"./schemas-74JEr9Jm.js";import{o as I}from"./index-LmGWO5sK.js";import{r as er,a as tr,f as rr}from"./index-05uTbNHo.js";function sr(e){return e===null?e:I(e,["id","name","email","phone"])}function nr(e){const{mainPassengerBooking:t}=e;return{...I(e,["id","code","externalReference"]),mainPassenger:sr(t)}}function ir(e){const{date:t,booking:r,url:s,passengerBookings:n}=e;return{...I(e,["id","externalId","code","status","totalPassengerCount","arrivedPassengerCount","waiverStatus","pickupPlace"]),date:new Date(t),booking:nr(r),passengerBookings:n,link:s}}var _,y,ie,v,k,$,U,ae,W,q,B,E,A,L,x,V,oe,Be,ue,Ee,ce,xe,de,Qe,le,je,fe,Ke,he,$e,Oe,It,_t,ar=(_t=class extends Rt{constructor(t,r){super();l(this,x);l(this,oe);l(this,ue);l(this,ce);l(this,de);l(this,le);l(this,fe);l(this,he);l(this,Oe);l(this,_,void 0);l(this,y,void 0);l(this,ie,void 0);l(this,v,void 0);l(this,k,void 0);l(this,$,void 0);l(this,U,void 0);l(this,ae,void 0);l(this,W,void 0);l(this,q,void 0);l(this,B,void 0);l(this,E,void 0);l(this,A,void 0);l(this,L,new Set);this.options=r,f(this,_,t),f(this,U,null),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(a(this,y).addObserver(this),lt(a(this,y),this.options)?p(this,x,V).call(this):this.updateResult(),p(this,de,Qe).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return We(a(this,y),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return We(a(this,y),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,p(this,le,je).call(this),p(this,fe,Ke).call(this),a(this,y).removeObserver(this)}setOptions(t,r){const s=this.options,n=a(this,y);if(this.options=a(this,_).defaultQueryOptions(t),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");p(this,he,$e).call(this),_e(this.options,s)||a(this,_).getQueryCache().notify({type:"observerOptionsUpdated",query:a(this,y),observer:this});const i=this.hasListeners();i&&ft(a(this,y),n,this.options,s)&&p(this,x,V).call(this),this.updateResult(r),i&&(a(this,y)!==n||this.options.enabled!==s.enabled||this.options.staleTime!==s.staleTime)&&p(this,oe,Be).call(this);const o=p(this,ue,Ee).call(this);i&&(a(this,y)!==n||this.options.enabled!==s.enabled||o!==a(this,A))&&p(this,ce,xe).call(this,o)}getOptimisticResult(t){const r=a(this,_).getQueryCache().build(a(this,_),t),s=this.createResult(r,t);return ur(this,s)&&(f(this,v,s),f(this,$,this.options),f(this,k,a(this,y).state)),s}getCurrentResult(){return a(this,v)}trackResult(t){const r={};return Object.keys(t).forEach(s=>{Object.defineProperty(r,s,{configurable:!1,enumerable:!0,get:()=>(a(this,L).add(s),t[s])})}),r}getCurrentQuery(){return a(this,y)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=a(this,_).defaultQueryOptions(t),s=a(this,_).getQueryCache().build(a(this,_),r);return s.isFetchingOptimistic=!0,s.fetch().then(()=>this.createResult(s,r))}fetch(t){return p(this,x,V).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),a(this,v)))}createResult(t,r){var at;const s=a(this,y),n=this.options,i=a(this,v),o=a(this,k),c=a(this,$),h=t!==s?t.state:a(this,ie),{state:u}=t;let{error:g,errorUpdatedAt:m,fetchStatus:S,status:C}=u,G=!1,b;if(r._optimisticResults){const R=this.hasListeners(),ze=!R&&lt(t,r),Wt=R&&ft(t,s,r,n);(ze||Wt)&&(S=Jt(t.options.networkMode)?"fetching":"paused",u.dataUpdatedAt||(C="pending")),r._optimisticResults==="isRestoring"&&(S="idle")}if(r.select&&typeof u.data<"u")if(i&&u.data===(o==null?void 0:o.data)&&r.select===a(this,ae))b=a(this,W);else try{f(this,ae,r.select),b=r.select(u.data),b=ct(i==null?void 0:i.data,b,r),f(this,W,b),f(this,U,null)}catch(R){f(this,U,R)}else b=u.data;if(typeof r.placeholderData<"u"&&typeof b>"u"&&C==="pending"){let R;if(i!=null&&i.isPlaceholderData&&r.placeholderData===(c==null?void 0:c.placeholderData))R=i.data;else if(R=typeof r.placeholderData=="function"?r.placeholderData((at=a(this,q))==null?void 0:at.state.data,a(this,q)):r.placeholderData,r.select&&typeof R<"u")try{R=r.select(R),f(this,U,null)}catch(ze){f(this,U,ze)}typeof R<"u"&&(C="success",b=ct(i==null?void 0:i.data,R,r),G=!0)}a(this,U)&&(g=a(this,U),b=a(this,W),m=Date.now(),C="error");const Fe=S==="fetching",Ue=C==="pending",Ie=C==="error",it=Ue&&Fe;return{status:C,fetchStatus:S,isPending:Ue,isSuccess:C==="success",isError:Ie,isInitialLoading:it,isLoading:it,data:b,dataUpdatedAt:u.dataUpdatedAt,error:g,errorUpdatedAt:m,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>h.dataUpdateCount||u.errorUpdateCount>h.errorUpdateCount,isFetching:Fe,isRefetching:Fe&&!Ue,isLoadingError:Ie&&u.dataUpdatedAt===0,isPaused:S==="paused",isPlaceholderData:G,isRefetchError:Ie&&u.dataUpdatedAt!==0,isStale:et(t,r),refetch:this.refetch}}updateResult(t){const r=a(this,v),s=this.createResult(a(this,y),this.options);if(f(this,k,a(this,y).state),f(this,$,this.options),a(this,k).data!==void 0&&f(this,q,a(this,y)),_e(s,r))return;f(this,v,s);const n={},i=()=>{if(!r)return!0;const{notifyOnChangeProps:o}=this.options,c=typeof o=="function"?o():o;if(c==="all"||!c&&!a(this,L).size)return!0;const d=new Set(c??a(this,L));return this.options.throwOnError&&d.add("error"),Object.keys(a(this,v)).some(h=>{const u=h;return a(this,v)[u]!==r[u]&&d.has(u)})};(t==null?void 0:t.listeners)!==!1&&i()&&(n.listeners=!0),p(this,Oe,It).call(this,{...n,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&p(this,de,Qe).call(this)}},_=new WeakMap,y=new WeakMap,ie=new WeakMap,v=new WeakMap,k=new WeakMap,$=new WeakMap,U=new WeakMap,ae=new WeakMap,W=new WeakMap,q=new WeakMap,B=new WeakMap,E=new WeakMap,A=new WeakMap,L=new WeakMap,x=new WeakSet,V=function(t){p(this,he,$e).call(this);let r=a(this,y).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Yt)),r},oe=new WeakSet,Be=function(){if(p(this,le,je).call(this),ot||a(this,v).isStale||!ut(this.options.staleTime))return;const r=Zt(a(this,v).dataUpdatedAt,this.options.staleTime)+1;f(this,B,setTimeout(()=>{a(this,v).isStale||this.updateResult()},r))},ue=new WeakSet,Ee=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(a(this,y)):this.options.refetchInterval)??!1},ce=new WeakSet,xe=function(t){p(this,fe,Ke).call(this),f(this,A,t),!(ot||this.options.enabled===!1||!ut(a(this,A))||a(this,A)===0)&&f(this,E,setInterval(()=>{(this.options.refetchIntervalInBackground||Ht.isFocused())&&p(this,x,V).call(this)},a(this,A)))},de=new WeakSet,Qe=function(){p(this,oe,Be).call(this),p(this,ce,xe).call(this,p(this,ue,Ee).call(this))},le=new WeakSet,je=function(){a(this,B)&&(clearTimeout(a(this,B)),f(this,B,void 0))},fe=new WeakSet,Ke=function(){a(this,E)&&(clearInterval(a(this,E)),f(this,E,void 0))},he=new WeakSet,$e=function(){const t=a(this,_).getQueryCache().build(a(this,_),this.options);if(t===a(this,y))return;const r=a(this,y);f(this,y,t),f(this,ie,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},Oe=new WeakSet,It=function(t){Pt.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(a(this,v))}),a(this,_).getQueryCache().notify({query:a(this,y),type:"observerResultsUpdated"})})},_t);function or(e,t){return t.enabled!==!1&&!e.state.dataUpdatedAt&&!(e.state.status==="error"&&t.retryOnMount===!1)}function lt(e,t){return or(e,t)||e.state.dataUpdatedAt>0&&We(e,t,t.refetchOnMount)}function We(e,t,r){if(t.enabled!==!1){const s=typeof r=="function"?r(e):r;return s==="always"||s!==!1&&et(e,t)}return!1}function ft(e,t,r,s){return r.enabled!==!1&&(e!==t||s.enabled===!1)&&(!r.suspense||e.state.status!=="error")&&et(e,r)}function et(e,t){return e.isStaleByTime(t.staleTime)}function ur(e,t){return!_e(e.getCurrentResult(),t)}var T,N,D,z,Y,ve,pe,qe,bt,cr=(bt=class extends Rt{constructor(t,r){super();l(this,Y);l(this,pe);l(this,T,void 0);l(this,N,void 0);l(this,D,void 0);l(this,z,void 0);f(this,T,t),this.setOptions(r),this.bindMethods(),p(this,Y,ve).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var s;const r=this.options;this.options=a(this,T).defaultMutationOptions(t),_e(this.options,r)||a(this,T).getMutationCache().notify({type:"observerOptionsUpdated",mutation:a(this,D),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&dt(r.mutationKey)!==dt(this.options.mutationKey)?this.reset():(s=a(this,D))==null||s.setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=a(this,D))==null||t.removeObserver(this)}onMutationUpdate(t){p(this,Y,ve).call(this),p(this,pe,qe).call(this,t)}getCurrentResult(){return a(this,N)}reset(){var t;(t=a(this,D))==null||t.removeObserver(this),f(this,D,void 0),p(this,Y,ve).call(this),p(this,pe,qe).call(this)}mutate(t,r){var s;return f(this,z,r),(s=a(this,D))==null||s.removeObserver(this),f(this,D,a(this,T).getMutationCache().build(a(this,T),this.options)),a(this,D).addObserver(this),a(this,D).execute(t)}},T=new WeakMap,N=new WeakMap,D=new WeakMap,z=new WeakMap,Y=new WeakSet,ve=function(){var r;const t=((r=a(this,D))==null?void 0:r.state)??Gt();f(this,N,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},pe=new WeakSet,qe=function(t){Pt.batch(()=>{var r,s,n,i,o,c,d,h;if(a(this,z)&&this.hasListeners()){const u=a(this,N).variables,g=a(this,N).context;(t==null?void 0:t.type)==="success"?((s=(r=a(this,z)).onSuccess)==null||s.call(r,t.data,u,g),(i=(n=a(this,z)).onSettled)==null||i.call(n,t.data,null,u,g)):(t==null?void 0:t.type)==="error"&&((c=(o=a(this,z)).onError)==null||c.call(o,t.error,u,g),(h=(d=a(this,z)).onSettled)==null||h.call(d,void 0,t.error,u,g))}this.listeners.forEach(u=>{u(a(this,N))})})},bt);function we(e=""){if(!qt())throw new Error("vue-query hooks can only be used inside setup() function or functions that support injection context.");const t=Xt(e),r=Lt(t);if(!r)throw new Error("No 'queryClient' found in Vue context, use 'VueQueryPlugin' to properly initialize the library.");return r}function es(e){return e}function dr(e,t,r){const s=r||we(),n=Dt(()=>{const m=Ft(t);typeof m.enabled=="function"&&(m.enabled=m.enabled());const S=s.defaultQueryOptions(m);return S._optimisticResults=s.isRestoring.value?"isRestoring":"optimistic",S}),i=new e(s,n.value),o=Ot(i.getCurrentResult());let c=()=>{};K(s.isRestoring,m=>{m||(c(),c=i.subscribe(S=>{ke(o,S)}))},{immediate:!0});const d=()=>{i.setOptions(n.value),ke(o,i.getCurrentResult())};K(n,d),wt(()=>{c()});const h=(...m)=>(d(),o.refetch(...m)),u=()=>new Promise((m,S)=>{let C=()=>{};const G=()=>{if(n.value.enabled!==!1){i.setOptions(n.value);const b=i.getOptimisticResult(n.value);b.isStale?(C(),i.fetchOptimistic(n.value).then(m,S)):(C(),m(b))}};G(),C=K(n,G)});K(()=>o.error,m=>{if(o.isError&&!o.isFetching&&Ut(n.value.throwOnError,[m,i.getCurrentQuery()]))throw m});const g=St(Ct(o));for(const m in o)typeof o[m]=="function"&&(g[m]=o[m]);return g.suspense=u,g.refetch=h,g}function tt(e,t){return dr(ar,e,t)}function zt(e,t){const r=t||we(),s=Dt(()=>r.defaultMutationOptions(Ft(e))),n=new cr(r,s.value),i=Ot(n.getCurrentResult()),o=n.subscribe(h=>{ke(i,h)}),c=(h,u)=>{n.mutate(h,u).catch(()=>{})};K(s,()=>{n.setOptions(s.value)}),wt(()=>{o()});const d=St(Ct(i));return K(()=>i.error,h=>{if(h&&Ut(s.value.throwOnError,[h]))throw h}),{...d,mutate:c,mutateAsync:i.mutate,reset:i.reset}}const lr="/v1/tour-bookings",fr={update:{url:({tourBookingId:e})=>`${lr}/${e}`,method:"put",schema:P.object({data:Vt.pick({scheduledDepartureId:!0,status:!0,arrivedPassengerCount:!0})})}};async function ts({tourBookingId:e,arrivedPassengerCount:t,status:r}){const{url:s,method:n,schema:i}=fr.update,{data:o}=await J[n](s({tourBookingId:e}),{arrivedPassengerCount:t,status:r},i);return I(o,["scheduledDepartureId","status","arrivedPassengerCount"])}var At=6e4,Tt=36e5,rs=1e3;function ht(e,t){var r;er(1,arguments);var s=tr((r=t==null?void 0:t.additionalDigits)!==null&&r!==void 0?r:2);if(s!==2&&s!==1&&s!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var n=mr(e),i;if(n.date){var o=gr(n.date,s);i=vr(o.restDateString,o.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var c=i.getTime(),d=0,h;if(n.time&&(d=_r(n.time),isNaN(d)))return new Date(NaN);if(n.timezone){if(h=br(n.timezone),isNaN(h))return new Date(NaN)}else{var u=new Date(c+d),g=new Date(0);return g.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),g.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),g}return new Date(c+d+h)}var ge={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},hr=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,pr=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,yr=/^([+-])(\d{2})(?::?(\d{2}))?$/;function mr(e){var t={},r=e.split(ge.dateTimeDelimiter),s;if(r.length>2)return t;if(/:/.test(r[0])?s=r[0]:(t.date=r[0],s=r[1],ge.timeZoneDelimiter.test(t.date)&&(t.date=e.split(ge.timeZoneDelimiter)[0],s=e.substr(t.date.length,e.length))),s){var n=ge.timezone.exec(s);n?(t.time=s.replace(n[1],""),t.timezone=n[1]):t.time=s}return t}function gr(e,t){var r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),s=e.match(r);if(!s)return{year:NaN,restDateString:""};var n=s[1]?parseInt(s[1]):null,i=s[2]?parseInt(s[2]):null;return{year:i===null?n:i*100,restDateString:e.slice((s[1]||s[2]).length)}}function vr(e,t){if(t===null)return new Date(NaN);var r=e.match(hr);if(!r)return new Date(NaN);var s=!!r[4],n=X(r[1]),i=X(r[2])-1,o=X(r[3]),c=X(r[4]),d=X(r[5])-1;if(s)return Cr(t,c,d)?Dr(t,c,d):new Date(NaN);var h=new Date(0);return!wr(t,i,o)||!Sr(t,n)?new Date(NaN):(h.setUTCFullYear(t,i,Math.max(n,o)),h)}function X(e){return e?parseInt(e):1}function _r(e){var t=e.match(pr);if(!t)return NaN;var r=Te(t[1]),s=Te(t[2]),n=Te(t[3]);return Rr(r,s,n)?r*Tt+s*At+n*1e3:NaN}function Te(e){return e&&parseFloat(e.replace(",","."))||0}function br(e){if(e==="Z")return 0;var t=e.match(yr);if(!t)return 0;var r=t[1]==="+"?-1:1,s=parseInt(t[2]),n=t[3]&&parseInt(t[3])||0;return Pr(s,n)?r*(s*Tt+n*At):NaN}function Dr(e,t,r){var s=new Date(0);s.setUTCFullYear(e,0,4);var n=s.getUTCDay()||7,i=(t-1)*7+r+1-n;return s.setUTCDate(s.getUTCDate()+i),s}var Or=[31,null,31,30,31,30,31,31,30,31,30,31];function Nt(e){return e%400===0||e%4===0&&e%100!==0}function wr(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(Or[t]||(Nt(e)?29:28))}function Sr(e,t){return t>=1&&t<=(Nt(e)?366:365)}function Cr(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function Rr(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function Pr(e,t){return t>=0&&t<=59}function Fr(e){return I(e,["id","code","name","thumbnailUrl"])}function Ur(e){return I(e,["id","time","durationSeconds"])}function Mt(e){const{tour:t,departure:r,tourBookings:s,scheduledUsers:n,bookingSystemAvailability:i,start:o,end:c}=e;return{...I(e,["id","comment","totalPassengerCount","status"]),tour:Fr(t),departure:Ur(r),tourBookings:(s??[]).map(ir),scheduledUsers:n.map(d=>I(d,["userId","vehicleId"])),bookingSystemAvailability:i,start:ht(o),end:ht(c)}}const ye={getByOperationalBaseAndDate:{url:({operationalBaseId:e,date:t})=>`/v1/operational-bases/${e}/scheduled-departures/${t instanceof Date?rr(t,"yyyy-MM-dd"):t}`,method:"get",schema:P.object({data:P.array(me)})},getById:{url:({scheduledDepartureId:e})=>`/v1/scheduled-departures/${e}`,method:"get",schema:P.object({data:me})},update:{url:({scheduledDepartureId:e})=>`/v1/scheduled-departures/${e}`,method:"put",schema:P.object({data:me.pick({comment:!0,status:!0})})},suggestResources:{url:({scheduledDepartureId:e})=>`/v1/scheduled-departures/${e}/suggest`,method:"get",schema:P.object({users:P.array(P.number()),vehicles:P.array(P.number())})},updateScheduledUsers:{url:({scheduledDepartureId:e})=>`/v1/scheduled-departures/${e}/scheduled-users`,method:"put",schema:P.object({data:me.shape.scheduledUsers})}};async function Ir({operationalBaseId:e,date:t}){const{url:r,method:s,schema:n}=ye.getByOperationalBaseAndDate,{data:i}=await J[s](r({operationalBaseId:e,date:t}),n);return i.map(Mt)}async function zr({scheduledDepartureId:e}){const{url:t,method:r,schema:s}=ye.getById,{data:n}=await J[r](t({scheduledDepartureId:e}),s);return Mt(n)}async function Ar({scheduledDepartureId:e,comment:t,status:r}){const{url:s,method:n,schema:i}=ye.update,{data:o}=await J[n](s({scheduledDepartureId:e}),{comment:t,status:r},i);return I(o,["comment","status"])}async function Tr({scheduledDepartureId:e}){const{url:t,method:r,schema:s}=ye.suggestResources,{users:n,vehicles:i}=await J[r](t({scheduledDepartureId:e}),s);return{users:n,vehicles:i}}async function Nr({scheduledDepartureId:e,scheduledUsers:t}){const{url:r,method:s,schema:n}=ye.updateScheduledUsers,{data:i}=await J[s](r({scheduledDepartureId:e}),{scheduledUsers:t},n);return i.map(o=>I(o,["userId","vehicleId"]))}var kt=Symbol.for("immer-nothing"),pt=Symbol.for("immer-draftable"),O=Symbol.for("immer-state");function F(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Z=Object.getPrototypeOf;function H(e){return!!e&&!!e[O]}function Q(e){var t;return e?Bt(e)||Array.isArray(e)||!!e[pt]||!!((t=e.constructor)!=null&&t[pt])||Ce(e)||Re(e):!1}var Mr=Object.prototype.constructor.toString();function Bt(e){if(!e||typeof e!="object")return!1;const t=Z(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Mr}function re(e,t){Se(e)===0?Object.entries(e).forEach(([r,s])=>{t(r,s,e)}):e.forEach((r,s)=>t(s,r,e))}function Se(e){const t=e[O];return t?t.type_:Array.isArray(e)?1:Ce(e)?2:Re(e)?3:0}function Le(e,t){return Se(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Et(e,t,r){const s=Se(e);s===2?e.set(t,r):s===3?e.add(r):e[t]=r}function kr(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Ce(e){return e instanceof Map}function Re(e){return e instanceof Set}function M(e){return e.copy_||e.base_}function Ye(e,t){if(Ce(e))return new Map(e);if(Re(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&Bt(e))return Z(e)?{...e}:Object.assign(Object.create(null),e);const r=Object.getOwnPropertyDescriptors(e);delete r[O];let s=Reflect.ownKeys(r);for(let n=0;n<s.length;n++){const i=s[n],o=r[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Z(e),r)}function rt(e,t=!1){return Pe(e)||H(e)||!Q(e)||(Se(e)>1&&(e.set=e.add=e.clear=e.delete=Br),Object.freeze(e),t&&re(e,(r,s)=>rt(s,!0))),e}function Br(){F(2)}function Pe(e){return Object.isFrozen(e)}var Er={};function j(e){const t=Er[e];return t||F(0,e),t}var se;function xt(){return se}function xr(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function yt(e,t){t&&(j("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ze(e){He(e),e.drafts_.forEach(Qr),e.drafts_=null}function He(e){e===se&&(se=e.parent_)}function mt(e){return se=xr(se,e)}function Qr(e){const t=e[O];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function gt(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[O].modified_&&(Ze(t),F(4)),Q(e)&&(e=be(t,e),t.parent_||De(t,e)),t.patches_&&j("Patches").generateReplacementPatches_(r[O].base_,e,t.patches_,t.inversePatches_)):e=be(t,r,[]),Ze(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==kt?e:void 0}function be(e,t,r){if(Pe(t))return t;const s=t[O];if(!s)return re(t,(n,i)=>vt(e,s,t,n,i,r)),t;if(s.scope_!==e)return t;if(!s.modified_)return De(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const n=s.copy_;let i=n,o=!1;s.type_===3&&(i=new Set(n),n.clear(),o=!0),re(i,(c,d)=>vt(e,s,n,c,d,r,o)),De(e,n,!1),r&&e.patches_&&j("Patches").generatePatches_(s,r,e.patches_,e.inversePatches_)}return s.copy_}function vt(e,t,r,s,n,i,o){if(H(n)){const c=i&&t&&t.type_!==3&&!Le(t.assigned_,s)?i.concat(s):void 0,d=be(e,n,c);if(Et(r,s,d),H(d))e.canAutoFreeze_=!1;else return}else o&&r.add(n);if(Q(n)&&!Pe(n)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;be(e,n),(!t||!t.scope_.parent_)&&De(e,n)}}function De(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&rt(t,r)}function jr(e,t){const r=Array.isArray(e),s={type_:r?1:0,scope_:t?t.scope_:xt(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let n=s,i=st;r&&(n=[s],i=ne);const{revoke:o,proxy:c}=Proxy.revocable(n,i);return s.draft_=c,s.revoke_=o,c}var st={get(e,t){if(t===O)return e;const r=M(e);if(!Le(r,t))return Kr(e,r,t);const s=r[t];return e.finalized_||!Q(s)?s:s===Ne(e.base_,t)?(Me(e),e.copy_[t]=Ge(s,e)):s},has(e,t){return t in M(e)},ownKeys(e){return Reflect.ownKeys(M(e))},set(e,t,r){const s=Qt(M(e),t);if(s!=null&&s.set)return s.set.call(e.draft_,r),!0;if(!e.modified_){const n=Ne(M(e),t),i=n==null?void 0:n[O];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(kr(r,n)&&(r!==void 0||Le(e.base_,t)))return!0;Me(e),Je(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Ne(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Me(e),Je(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=M(e),s=Reflect.getOwnPropertyDescriptor(r,t);return s&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:s.enumerable,value:r[t]}},defineProperty(){F(11)},getPrototypeOf(e){return Z(e.base_)},setPrototypeOf(){F(12)}},ne={};re(st,(e,t)=>{ne[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ne.deleteProperty=function(e,t){return ne.set.call(this,e,t,void 0)};ne.set=function(e,t,r){return st.set.call(this,e[0],t,r,e[0])};function Ne(e,t){const r=e[O];return(r?M(r):e)[t]}function Kr(e,t,r){var n;const s=Qt(t,r);return s?"value"in s?s.value:(n=s.get)==null?void 0:n.call(e.draft_):void 0}function Qt(e,t){if(!(t in e))return;let r=Z(e);for(;r;){const s=Object.getOwnPropertyDescriptor(r,t);if(s)return s;r=Z(r)}}function Je(e){e.modified_||(e.modified_=!0,e.parent_&&Je(e.parent_))}function Me(e){e.copy_||(e.copy_=Ye(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var $r=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,s)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(d=i,...h){return o.produce(d,u=>r.call(this,u,...h))}}typeof r!="function"&&F(6),s!==void 0&&typeof s!="function"&&F(7);let n;if(Q(t)){const i=mt(this),o=Ge(t,void 0);let c=!0;try{n=r(o),c=!1}finally{c?Ze(i):He(i)}return yt(i,s),gt(n,i)}else if(!t||typeof t!="object"){if(n=r(t),n===void 0&&(n=t),n===kt&&(n=void 0),this.autoFreeze_&&rt(n,!0),s){const i=[],o=[];j("Patches").generateReplacementPatches_(t,n,i,o),s(i,o)}return n}else F(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...c)=>this.produceWithPatches(o,d=>t(d,...c));let s,n;return[this.produce(t,r,(o,c)=>{s=o,n=c}),s,n]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Q(e)||F(8),H(e)&&(e=Wr(e));const t=mt(this),r=Ge(e,void 0);return r[O].isManual_=!0,He(t),r}finishDraft(e,t){const r=e&&e[O];(!r||!r.isManual_)&&F(9);const{scope_:s}=r;return yt(s,t),gt(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(n.path.length===0&&n.op==="replace"){e=n.value;break}}r>-1&&(t=t.slice(r+1));const s=j("Patches").applyPatches_;return H(e)?s(e,t):this.produce(e,n=>s(n,t))}};function Ge(e,t){const r=Ce(e)?j("MapSet").proxyMap_(e,t):Re(e)?j("MapSet").proxySet_(e,t):jr(e,t);return(t?t.scope_:xt()).drafts_.push(r),r}function Wr(e){return H(e)||F(10,e),jt(e)}function jt(e){if(!Q(e)||Pe(e))return e;const t=e[O];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Ye(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Ye(e,!0);return re(r,(s,n)=>{Et(r,s,jt(n))}),t&&(t.finalized_=!1),r}var w=new $r,Kt=w.produce;w.produceWithPatches.bind(w);var qr=w.setAutoFreeze.bind(w);w.setUseStrictShallowCopy.bind(w);w.applyPatches.bind(w);w.createDraft.bind(w);w.finishDraft.bind(w);qr(!1);const ee="scheduled-departure",te={ByOperationalBaseAndDate:"get-by-operational-base-and-date",ById:"get-by-id",SuggestedResources:"get-suggested-resources"},nt={byOperationalBaseAndDate:e=>[{entity:ee,scope:te.ByOperationalBaseAndDate,...e}],byId:e=>[{entity:ee,scope:te.ById,...e}],suggestedResources:e=>[{entity:ee,scope:te.SuggestedResources,...e}]};function Lr(e){return{queryKey:nt.byOperationalBaseAndDate(e),queryFn:({queryKey:t})=>Ir(Xe(t)),enabled:Ve(e),refetchOnWindowFocus:!1}}function ss(e){return tt(Lr(e))}function $t(e){return{queryKey:nt.byId(e),queryFn:({queryKey:t})=>zr(Xe(t)),enabled:Ve(e)}}function ns(e){return tt($t(e))}function is(){const e=we();return zt({mutationFn:Ar,onSuccess({comment:t,status:r},{scheduledDepartureId:s}){e.setQueryData($t({scheduledDepartureId:s}).queryKey,n=>n?{...n,comment:t,status:r}:void 0),e.setQueriesData({queryKey:[{entity:ee,scope:te.ByOperationalBaseAndDate}],type:"active"},n=>Kt(n??[],i=>{for(const o of i)if(o.id===s){o.comment=t,o.status=r;return}}))}})}function Yr(e){return{queryKey:nt.byId(e),queryFn:({queryKey:t})=>Tr(Xe(t)),enabled:Ve(e)}}function as(e){return tt(Yr(e))}function os(){const e=we();return zt({mutationFn:Nr,onSuccess(t,{scheduledDepartureId:r}){e.setQueriesData({queryKey:[{entity:ee,scope:te.ByOperationalBaseAndDate}],type:"active"},s=>Kt(s??[],n=>{for(const i of n)if(i.id===r){i.scheduledUsers=[...t];return}}))}})}export{ye as a,Mt as b,Fr as c,Ur as d,fr as e,zt as f,ts as g,$t as h,ss as i,is as j,ns as k,tt as l,as as m,ir as n,os as o,Tt as p,es as q,At as r,rs as s,we as u};
