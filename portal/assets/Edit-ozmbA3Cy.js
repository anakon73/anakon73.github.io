import{e as S,z as U,j as V,q as j,n as q,V as A,o as i,A as p,B as l,E as P,l as t,u as e,D as m,b as d,k as _,J as $,P as z,G as g,T as b,N as O,F as G}from"./vue.esm-bundler-CYPfFjdk.js";import{R as J}from"./RightDrawer-Lpr6admO.js";import{a as H}from"./preview-D0Pi-YKn.js";import{I as K}from"./IconClose-tbzieUCA.js";import{P as y}from"./ProgressSpinner-lCLkagxy.js";import{_ as Q,a as W}from"./ActionErrorAlert--bGVRXV4.js";import{u as X}from"./useExperienceLocation-WT3dP7yS.js";import{I as Y}from"./IconArrowLeft-JXlNC1hw.js";import{u as Z}from"./useMap-r2WMKGtK.js";import"./_plugin-vue_export-helper-x3n3nnut.js";import"./chunk-UXHY756F-iEg6Hh0Y.js";import"./index-C1vJkiWb.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./vue-router-E7v71uM3.js";import"./preview-errors-7FWlPnjy.js";import"./index-PPLHz8o0.js";import"./schemas-74JEr9Jm.js";import"./index-LmGWO5sK.js";import"./routes-WhYxSpGG.js";import"./models-qWR1FMGP.js";import"./PDays-npMhi6Nw.js";import"./index-baqd9Qr3.js";import"./index-TCXC35p5.js";import"./index-05uTbNHo.js";import"./PPopoverPanel-RNuJphX8.js";import"./headlessui-float-sqR0azf2.js";import"./transition-qpXhaAaU.js";import"./keyboard-64MH3N5t.js";import"./open-closed-nhb_Ydho.js";import"./use-root-containers-gEPBKDr2.js";import"./use-resolve-button-type-49aRxFpo.js";import"./iframe-ufxlS10p.js";import"../sb-preview/runtime.js";import"./query-G1AwWss6.js";import"./ChevronDownIcon-AgxEjrtE.js";import"./listbox-3RN1mHPV.js";import"./form-TGXPuq_M.js";import"./DepartureList-w5NrqMJ9.js";import"./DepartureAssignStaffAndVehicles-8AoBdfT8.js";import"./api-B2HcjM2j.js";import"./api-cJzoLyfI.js";import"./PButton-h9_xezBg.js";import"./index-VqpYtbVe.js";import"./PInput-iZb_REtl.js";import"./POverlay-3jPNvx4x.js";import"./PSpinner-cF72MsvC.js";import"./IconBus-0QPjtZ9u.js";import"./IconPerson-i3ljUCnk.js";import"./SuggestedUser-4kWsZiWj.js";import"./PAvatar-wq6oK0Zr.js";import"./PlusCircleIcon-aSiXn_Mr.js";import"./SuggestedVehicle-r1TyKt-D.js";import"./ScheduledUser-esbe3tjU.js";import"./VehicleTitle-0pOySBND.js";import"./XMarkIcon-_tXc_TyD.js";import"./PPhoneLink-wKLYRG_F.js";import"./PAlert-quHLeqTA.js";import"./CheckCircleIcon-akbq8cGf.js";import"./XMarkIcon-t43a1P5Z.js";import"./PDialogTitle-rfxNVwSR.js";import"./description-LPuBJoU_.js";import"./DepartureListItem-I88AIHqM.js";import"./DepartureUpdateComment-2rt04tFb.js";import"./PTextarea-Wrr33MR5.js";import"./DepartureUpdateCommentPopover-euFlcGix.js";import"./DepartureUpdateStatus-zdhd3wV8.js";import"./PListboxLabel-U39qo3cm.js";import"./CheckIcon-WRJIoum8.js";import"./lib-Fy6oBlQ3.js";import"./PToggle-mLVcOzrp.js";import"./PRadio-sGATo2dT.js";import"./index-bhXQ3okY.js";import"./isNativeReflectConstruct-ubdnbphT.js";import"./mock-vjhcKIQW.js";import"./index-1aVAeLWL.js";import"./mock-UR5nntqf.js";import"./mock-CzN7Q16W.js";import"./mock-YoOI-P8k.js";import"./mock-psFphV_9.js";import"./mock-OgPWcINV.js";import"./IconTickMarkCircle-2_sKm8Jk.js";import"./leaflet-src-KPccyqlJ.js";const ee={class:"isolate flex flex-col items-center justify-center border-l bg-white pb-6"},te={class:"sticky top-0 z-[9999999] flex w-full items-center justify-end gap-x-2 bg-white p-6"},oe=t("div",{class:"mb-6"},[t("h3",{class:"text-base font-semibold leading-6 text-gray-900"}," Edit Experience Location. "),t("p",{class:"mt-1 text-sm text-gray-500"}," Use the form below to edit the Experience Location. ")],-1),ie={class:"grid grid-cols-1 gap-x-4 gap-y-6 pt-6"},re=t("label",{for:"experience_location_name",class:"block text-sm font-medium text-gray-700"}," Experience Location Name ",-1),ae={class:"mt-1"},ne={class:"flex flex-col"},se=t("label",{class:"mb-1 block text-sm font-medium text-gray-700"}," Location ",-1),pe=t("div",{id:"map",class:"h-[400px] w-full bg-gray-100"},null,-1),me={class:"text-xs italic text-gray-500"},le={class:"relative pt-5"},ce={class:"flex items-center justify-end"},de={class:"flex items-center"},ue={key:0},xe=S({__name:"Edit",props:{operationalBaseId:{},experienceLocationId:{}},setup(h){const v=h,{experienceLocationId:E}=U(v),{validateForm:L,actionIsInProgress:c,actionIsInError:k,actionIsInSuccess:w}=H(),{experienceLocationActions:r,editExperienceLocation:I,editExperienceLocationFormData:o,getExperienceLocationById:B}=X(),{createMap:F,addLayersToMap:N,createExperienceLocationMarker:u,resetMapView:M,tidyUpMap:T}=Z(),x=V(null),C=async()=>{await L(x.value,()=>I(o.value))};let a=null;const R=()=>{a=F(Number.parseFloat(o.value.latitude),Number.parseFloat(o.value.longitude)),N(a);let n=u(Number.parseFloat(o.value.latitude),Number.parseFloat(o.value.longitude));n.addTo(a),a.on("click",s=>{o.value.latitude=s.latlng.lat.toString(),o.value.longitude=s.latlng.lng.toString(),n&&a.removeLayer(n),n=u(s.latlng.lat,s.latlng.lng),n.addTo(a)}),M(a,Number.parseFloat(o.value.latitude),Number.parseFloat(o.value.longitude))};return j(async()=>{o.value=await B(E.value.toString()),await q(()=>{setTimeout(()=>R(),400)})}),A(()=>{T(a)}),(n,s)=>{const f=P("RouterLink");return i(),p(J,null,{default:l(()=>[t("div",ee,[t("div",te,[e(c)(e(r).editExperienceLocation)?(i(),p(y,{key:0,class:"h-5 w-5 text-blue-500"})):m("",!0),e(c)(e(r).editExperienceLocation)?m("",!0):(i(),p(f,{key:1,to:{name:n.$Routes.OperationalBaseEdit,params:{operationalBaseId:e(o).operationalBaseId}}},{default:l(()=>[d(Y,{class:"h-5 w-5 fill-blue-400"})]),_:1},8,["to"])),e(c)(e(r).editExperienceLocation)?m("",!0):(i(),p(f,{key:2,to:{name:n.$Routes.OperationalBases}},{default:l(()=>[d(K,{class:"h-5 w-5 fill-red-400"})]),_:1},8,["to"]))]),t("form",{id:"create_operational_base_form",ref_key:"editExperienceLocationFormElement",ref:x,class:"w-full space-y-8 divide-y divide-gray-200 px-6 md:px-12"},[oe,e(o)?(i(),_(G,{key:0},[t("div",ie,[t("div",null,[re,t("div",ae,[$(t("input",{id:"experience_location_name","onUpdate:modelValue":s[0]||(s[0]=D=>e(o).name=D),type:"text",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",required:""},null,512),[[z,e(o).name]])])]),t("div",ne,[se,pe,t("p",me,g(e(o).latitude)+", "+g(e(o).longitude),1)])]),t("div",le,[t("div",ce,[d(b,{name:"alert"},{default:l(()=>[e(w)(e(r).editExperienceLocation)?(i(),p(Q,{key:0,action:e(r).editExperienceLocation},null,8,["action"])):m("",!0)]),_:1}),d(b,{name:"alert"},{default:l(()=>[e(k)(e(r).editExperienceLocation)?(i(),p(W,{key:0,action:e(r).editExperienceLocation},null,8,["action"])):m("",!0)]),_:1}),t("div",de,[t("button",{class:"ml-3 inline-flex h-9 items-center justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm focus:outline-none hover:bg-blue-700",onClick:O(C,["prevent"])},[e(c)(e(r).editExperienceLocation)?(i(),p(y,{key:1,class:"h-3 w-3 text-white"})):(i(),_("span",ue," Apply Changes "))])])])])],64)):m("",!0)],512)])]),_:1})}}});xe.__docgenInfo={exportName:"default",displayName:"Edit",description:"",tags:{},props:[{name:"operationalBaseId",required:!0,type:{name:"number"}},{name:"experienceLocationId",required:!0,type:{name:"number"}}],sourceFiles:["D:/work/server/htdocs/aa-portal.is/src/pages/operational-bases/experience-locations/Edit.vue"]};export{xe as default};
