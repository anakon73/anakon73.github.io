import{e as k,o as e,k as o,l as t,G as u,v as $,A as B,B as c,E as F,u as s,b as n,x,D as d,F as y,H as b}from"./vue.esm-bundler-CYPfFjdk.js";import{s as w}from"./schemas-74JEr9Jm.js";import{a as P,f as v,M as L,A as V}from"./preview-D0Pi-YKn.js";import{P as M}from"./ProgressSpinner-lCLkagxy.js";import{a as U,b as H}from"./useVehicle-nrY-7Tml.js";import{O as j}from"./ApiGetRequestDTO-QMLlugHb.js";import{_ as q}from"./VDataFilters-2mcnRfw0.js";import{u as G}from"./useAuth-8d_1_S6I.js";import"./index-LmGWO5sK.js";import"./vue-router-E7v71uM3.js";import"./routes-WhYxSpGG.js";import"./models-qWR1FMGP.js";import"./chunk-UXHY756F-iEg6Hh0Y.js";import"./index-C1vJkiWb.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./preview-errors-7FWlPnjy.js";import"./index-PPLHz8o0.js";import"./PDays-npMhi6Nw.js";import"./index-baqd9Qr3.js";import"./index-TCXC35p5.js";import"./index-05uTbNHo.js";import"./PPopoverPanel-RNuJphX8.js";import"./headlessui-float-sqR0azf2.js";import"./transition-qpXhaAaU.js";import"./keyboard-64MH3N5t.js";import"./open-closed-nhb_Ydho.js";import"./use-root-containers-gEPBKDr2.js";import"./use-resolve-button-type-49aRxFpo.js";import"./iframe-ufxlS10p.js";import"../sb-preview/runtime.js";import"./query-G1AwWss6.js";import"./ChevronDownIcon-AgxEjrtE.js";import"./listbox-3RN1mHPV.js";import"./form-TGXPuq_M.js";import"./DepartureList-w5NrqMJ9.js";import"./DepartureAssignStaffAndVehicles-8AoBdfT8.js";import"./api-B2HcjM2j.js";import"./api-cJzoLyfI.js";import"./PButton-h9_xezBg.js";import"./index-VqpYtbVe.js";import"./PInput-iZb_REtl.js";import"./POverlay-3jPNvx4x.js";import"./PSpinner-cF72MsvC.js";import"./IconBus-0QPjtZ9u.js";import"./_plugin-vue_export-helper-x3n3nnut.js";import"./IconPerson-i3ljUCnk.js";import"./SuggestedUser-4kWsZiWj.js";import"./PAvatar-wq6oK0Zr.js";import"./PlusCircleIcon-aSiXn_Mr.js";import"./SuggestedVehicle-r1TyKt-D.js";import"./ScheduledUser-esbe3tjU.js";import"./VehicleTitle-0pOySBND.js";import"./XMarkIcon-_tXc_TyD.js";import"./PPhoneLink-wKLYRG_F.js";import"./PAlert-quHLeqTA.js";import"./CheckCircleIcon-akbq8cGf.js";import"./XMarkIcon-t43a1P5Z.js";import"./PDialogTitle-rfxNVwSR.js";import"./description-LPuBJoU_.js";import"./DepartureListItem-I88AIHqM.js";import"./DepartureUpdateComment-2rt04tFb.js";import"./PTextarea-Wrr33MR5.js";import"./DepartureUpdateCommentPopover-euFlcGix.js";import"./DepartureUpdateStatus-zdhd3wV8.js";import"./PListboxLabel-U39qo3cm.js";import"./CheckIcon-WRJIoum8.js";import"./lib-Fy6oBlQ3.js";import"./PToggle-mLVcOzrp.js";import"./PRadio-sGATo2dT.js";import"./index-bhXQ3okY.js";import"./isNativeReflectConstruct-ubdnbphT.js";import"./mock-vjhcKIQW.js";import"./index-1aVAeLWL.js";import"./mock-UR5nntqf.js";import"./mock-CzN7Q16W.js";import"./mock-YoOI-P8k.js";import"./mock-psFphV_9.js";import"./mock-OgPWcINV.js";import"./useDepartment-RZahlhen.js";import"./useOperationalBase-kvvO22e1.js";import"./useRole-JNprELZd.js";const O=""+new URL("../img/iceland_flag.png",import.meta.url).href,T={class:"w-[125px] rounded border border-gray-300 bg-white p-0.5"},W={class:"relative flex w-full items-center justify-between gap-1 rounded border-x-4 border-y-2 border-blue-900/40 px-2 py-1 text-base font-bold uppercase"},z=t("div",{class:"flex h-4 w-3 flex-col items-center"},[t("img",{src:O,alt:"a"}),t("span",{class:"-mt-1 scale-y-75 text-xs font-bold"},"IS")],-1),J={class:"flex-1 text-center"},K={class:"leading-none md:-mt-0.5"},N=k({__name:"VVehicleRegistrationPlate",props:{registration:{}},setup(p){return(l,_)=>(e(),o("div",T,[t("div",W,[z,t("div",J,[t("p",K,u(l.registration),1)])])]))}});N.__docgenInfo={exportName:"default",displayName:"VVehicleRegistrationPlate",description:"",tags:{},props:[{name:"registration",required:!0,type:{name:"string"}}],sourceFiles:["D:/work/server/htdocs/aa-portal.is/src/shared/ui/VVehicleRegistrationPlate.vue"]};var S=(p=>(p.NAME="name",p))(S||{});const Q={key:0,class:"flex w-full justify-end py-6"},X={class:"flex flex-col pb-4"},Y={class:"flow-root md:mt-8"},Z={class:"overflow-x-auto"},tt={class:"inline-block min-w-full py-2 align-middle"},et={key:0,class:"flex h-[50px] items-center justify-center rounded border border-gray-100 bg-gray-50 shadow"},ot={key:1,class:"min-w-full divide-y divide-gray-300 rounded border border-gray-100 bg-white shadow"},st=t("th",{scope:"col",class:"bg-gray-50 px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Registration ",-1),rt=t("th",{scope:"col",class:"bg-gray-50 px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Name ",-1),it={key:0,scope:"col",class:"bg-gray-50 px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},at={class:"divide-y divide-gray-200"},nt={key:0},pt=t("td",{colspan:"8",class:"px-3 py-3.5 text-center text-sm text-gray-500"}," No vehicles found for this department. ",-1),mt=[pt],lt={class:"flex items-center whitespace-nowrap p-3 text-sm font-medium text-gray-900"},ct={class:"whitespace-nowrap p-3 text-sm text-gray-500"},dt={key:0},ut={key:1},_t={key:0,class:"whitespace-nowrap p-3 text-sm text-gray-500"},ht={key:0},ft={key:1,class:"p-2 text-red-500"},gt={class:"relative whitespace-nowrap p-3 text-right text-sm font-medium"},xt=k({__name:"Index",setup(p){const{vehicleActions:l,apiGetVehicles:_,storeClearAllVehicles:A,storeSetVehicles:D}=U(),{storeVehicles:h}=w(H()),{actionIsInProgress:I}=P(),{storeSetFilterState:E}=v(),{storeFilterState:i}=w(v()),{userHasPermissionInDepartment:C}=G(),R=async m=>{E(m);const f={selectedDepartment:i.value.selectedDepartment,sortBy:S.NAME,orderBy:j.ASC},a=await _(f);if(a){const r=a.data.vehicles;D(r)}};return $(()=>{A()}),(m,f)=>{const a=F("RouterLink");return e(),B(L,{"main-content-title":"Manage Vehicles"},{default:c(()=>[s(i).selectedDepartment&&s(C)(s(V).MANAGE_VEHICLES,s(i).selectedDepartment)?(e(),o("div",Q,[n(a,{to:{name:m.$Routes.VehicleCreate},class:"block w-full whitespace-nowrap rounded-md bg-blue-600 px-3 py-1.5 text-center text-sm font-semibold leading-6 text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600 hover:bg-blue-500 md:w-48"},{default:c(()=>[x(" Add Vehicle ")]),_:1},8,["to"])])):d("",!0),n(q,{"department-permissions-required":[s(V).VIEW_VEHICLES],"filter-by-departments":"","filter-state":s(i),"allow-no-department":"",onFilterStateUpdated:R},null,8,["department-permissions-required","filter-state"]),t("div",X,[t("div",Y,[t("div",Z,[t("div",tt,[s(I)(s(l).getAllVehicles)?(e(),o("div",et,[n(M,{class:"h-5 w-5 text-blue-600"})])):(e(),o("table",ot,[t("thead",null,[t("tr",null,[st,rt,s(i).selectedDepartment===null?(e(),o("th",it," Department ")):d("",!0)])]),t("tbody",at,[s(h).length===0?(e(),o("tr",nt,mt)):(e(!0),o(y,{key:1},b(s(h),r=>(e(),o("tr",{key:r.id},[t("td",lt,[n(N,{registration:r.registrationNumber},null,8,["registration"])]),t("td",ct,[r.name?(e(),o("span",dt,' "'+u(r.name)+'" ',1)):(e(),o("span",ut," - "))]),s(i).selectedDepartment===null?(e(),o("td",_t,[r.departments.length?(e(),o("div",ht,[(e(!0),o(y,null,b(r.departments,g=>(e(),o("div",{key:g.id,class:"p-2"},u(g.name),1))),128))])):(e(),o("span",ft,"None"))])):d("",!0),t("td",gt,[n(a,{to:{name:m.$Routes.VehicleEdit,params:{vehicleId:r.id}},class:"text-blue-600 hover:text-blue-900"},{default:c(()=>[x(" View ")]),_:2},1032,["to"])])]))),128))])]))])])])])]),_:1})}}});xt.__docgenInfo={exportName:"default",displayName:"vehicles",description:"",tags:{},sourceFiles:["D:/work/server/htdocs/aa-portal.is/src/pages/vehicles/Index.vue"]};export{xt as default};
