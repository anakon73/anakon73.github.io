{"version":3,"file":"useDepartment-RZahlhen.js","sources":["../../src/shared/api/stores/department.ts","../../src/shared/api/departments/useDepartment.ts"],"sourcesContent":["import { ref } from 'vue'\nimport { defineStore } from 'pinia'\nimport type { IDepartment } from '@/shared/types/departments/IDepartments'\n\nexport const useDepartmentsStore = defineStore('departments', () => {\n  const departments = ref<IDepartment[]>([])\n\n  function setDepartments(i: IDepartment[]) {\n    departments.value = i\n  }\n\n  function clearDepartments() {\n    departments.value = []\n  }\n\n  return {\n    setDepartments,\n    departments,\n    clearDepartments,\n  }\n})\n","import { storeToRefs } from 'pinia'\nimport { useUi } from '@/shared/lib/composables/useUi'\nimport type { IAction } from '@/shared/types/api/IAction'\nimport { useApiClient } from '@/shared/api/useApiClient'\nimport { useDepartmentsStore } from '@/shared/api/stores/department'\nimport type { IDepartment } from '@/shared/types/departments/IDepartments'\n\nexport function useDepartment() {\n  const { apiClient } = useApiClient()\n  const {\n    addToActionsInProgress,\n    removeFromActionsInProgress,\n    processActionError,\n    resetActionsInError,\n  } = useUi()\n\n  const {\n    setDepartments,\n  } = useDepartmentsStore()\n\n  const { departments } = storeToRefs(useDepartmentsStore())\n  const departmentActions = {\n    getDepartments: {\n      id: 'getDepartments',\n      successMessage: 'Departments retrieved successfully.',\n      errorMessage: 'There was a problem retrieving the departments.',\n    } as IAction,\n  }\n\n  const apiGetDepartments = async () => {\n    resetActionsInError()\n    addToActionsInProgress(departmentActions.getDepartments)\n\n    try {\n      const rsp = await apiClient.get('/api/departments')\n      removeFromActionsInProgress(departmentActions.getDepartments)\n      return rsp.data.departments\n    }\n    catch (e: any) {\n      console.log(e)\n      processActionError(departmentActions.getDepartments, e)\n    }\n  }\n\n  const storeSetDepartments = (d: IDepartment[]) => {\n    setDepartments(d)\n  }\n  const storeGetDepartments = (): IDepartment[] => {\n    return departments.value\n  }\n\n  return {\n    apiGetDepartments,\n    storeGetDepartments,\n    storeSetDepartments,\n    departmentActions,\n  }\n}\n"],"names":["useDepartmentsStore","defineStore","departments","ref","setDepartments","i","clearDepartments","useDepartment","apiClient","useApiClient","addToActionsInProgress","removeFromActionsInProgress","processActionError","resetActionsInError","useUi","storeToRefs","departmentActions","rsp","d"],"mappings":"oJAIa,MAAAA,EAAsBC,EAAY,cAAe,IAAM,CAC5D,MAAAC,EAAcC,EAAmB,CAAA,CAAE,EAEzC,SAASC,EAAeC,EAAkB,CACxCH,EAAY,MAAQG,CACtB,CAEA,SAASC,GAAmB,CAC1BJ,EAAY,MAAQ,EACtB,CAEO,MAAA,CACL,eAAAE,EACA,YAAAF,EACA,iBAAAI,CAAA,CAEJ,CAAC,ECbM,SAASC,GAAgB,CACxB,KAAA,CAAE,UAAAC,GAAcC,IAChB,CACJ,uBAAAC,EACA,4BAAAC,EACA,mBAAAC,EACA,oBAAAC,GACEC,EAAM,EAEJ,CACJ,eAAAV,GACEJ,EAAoB,EAElB,CAAE,YAAAE,CAAgB,EAAAa,EAAYf,EAAqB,CAAA,EACnDgB,EAAoB,CACxB,eAAgB,CACd,GAAI,iBACJ,eAAgB,sCAChB,aAAc,iDAChB,CAAA,EAyBK,MAAA,CACL,kBAvBwB,SAAY,CAChBH,IACpBH,EAAuBM,EAAkB,cAAc,EAEnD,GAAA,CACF,MAAMC,EAAM,MAAMT,EAAU,IAAI,kBAAkB,EAClD,OAAAG,EAA4BK,EAAkB,cAAc,EACrDC,EAAI,KAAK,kBAEX,EAAQ,CACb,QAAQ,IAAI,CAAC,EACML,EAAAI,EAAkB,eAAgB,CAAC,CACxD,CAAA,EAYA,oBAN0B,IACnBd,EAAY,MAMnB,oBAV2BgB,GAAqB,CAChDd,EAAec,CAAC,CAAA,EAUhB,kBAAAF,CAAA,CAEJ"}