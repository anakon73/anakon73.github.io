import{j as a,e as S,q as O,o as E,A as B,B as L,E as M,l as e,b as m,u as i,a0 as R,a1 as F}from"./vue.esm-bundler-CYPfFjdk.js";import{u as k,M as q}from"./preview-D0Pi-YKn.js";import{_ as T}from"./_plugin-vue_export-helper-x3n3nnut.js";import"./chunk-UXHY756F-iEg6Hh0Y.js";import"./index-C1vJkiWb.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./vue-router-E7v71uM3.js";import"./preview-errors-7FWlPnjy.js";import"./index-PPLHz8o0.js";import"./schemas-74JEr9Jm.js";import"./index-LmGWO5sK.js";import"./routes-WhYxSpGG.js";import"./models-qWR1FMGP.js";import"./PDays-npMhi6Nw.js";import"./index-baqd9Qr3.js";import"./index-TCXC35p5.js";import"./index-05uTbNHo.js";import"./PPopoverPanel-RNuJphX8.js";import"./headlessui-float-sqR0azf2.js";import"./transition-qpXhaAaU.js";import"./keyboard-64MH3N5t.js";import"./open-closed-nhb_Ydho.js";import"./use-root-containers-gEPBKDr2.js";import"./use-resolve-button-type-49aRxFpo.js";import"./iframe-ufxlS10p.js";import"../sb-preview/runtime.js";import"./query-G1AwWss6.js";import"./ChevronDownIcon-AgxEjrtE.js";import"./listbox-3RN1mHPV.js";import"./form-TGXPuq_M.js";import"./DepartureList-w5NrqMJ9.js";import"./DepartureAssignStaffAndVehicles-8AoBdfT8.js";import"./api-B2HcjM2j.js";import"./api-cJzoLyfI.js";import"./PButton-h9_xezBg.js";import"./index-VqpYtbVe.js";import"./PInput-iZb_REtl.js";import"./POverlay-3jPNvx4x.js";import"./PSpinner-cF72MsvC.js";import"./IconBus-0QPjtZ9u.js";import"./IconPerson-i3ljUCnk.js";import"./SuggestedUser-4kWsZiWj.js";import"./PAvatar-wq6oK0Zr.js";import"./PlusCircleIcon-aSiXn_Mr.js";import"./SuggestedVehicle-r1TyKt-D.js";import"./ScheduledUser-esbe3tjU.js";import"./VehicleTitle-0pOySBND.js";import"./XMarkIcon-_tXc_TyD.js";import"./PPhoneLink-wKLYRG_F.js";import"./PAlert-quHLeqTA.js";import"./CheckCircleIcon-akbq8cGf.js";import"./XMarkIcon-t43a1P5Z.js";import"./PDialogTitle-rfxNVwSR.js";import"./description-LPuBJoU_.js";import"./DepartureListItem-I88AIHqM.js";import"./DepartureUpdateComment-2rt04tFb.js";import"./PTextarea-Wrr33MR5.js";import"./DepartureUpdateCommentPopover-euFlcGix.js";import"./DepartureUpdateStatus-zdhd3wV8.js";import"./PListboxLabel-U39qo3cm.js";import"./CheckIcon-WRJIoum8.js";import"./lib-Fy6oBlQ3.js";import"./PToggle-mLVcOzrp.js";import"./PRadio-sGATo2dT.js";import"./index-bhXQ3okY.js";import"./isNativeReflectConstruct-ubdnbphT.js";import"./mock-vjhcKIQW.js";import"./index-1aVAeLWL.js";import"./mock-UR5nntqf.js";import"./mock-CzN7Q16W.js";import"./mock-YoOI-P8k.js";import"./mock-psFphV_9.js";import"./mock-OgPWcINV.js";function j(){const{apiClient:o}=k(),r=a({chart:{type:"bar",stacked:!0},plotOptions:{bar:{borderRadius:4,horizontal:!0}},xaxis:{categories:[]},yaxis:{labels:{align:"left"}}}),u=a([]),_=async()=>{try{const t=await o.get("/api/metrics/incidents/total-by-location");r.value={...r.value,xaxis:{categories:t.data.categories}},u.value=t.data.series}catch(t){console.log(t)}},n=a({chart:{type:"line",height:350,zoom:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},xaxis:{categories:[],labels:{show:!1}},tooltip:{x:{format:"dd/MM/yy"}},yaxis:[{seriesName:"Incidents",labels:{formatter:t=>Math.round(t).toString()}}]}),h=a([]),f=async()=>{try{const t=await o.get("/api/metrics/incidents/frequency-over-time");n.value={...n.value,xaxis:{categories:t.data.categories,labels:{show:!1}}},h.value=t.data.series}catch(t){console.log(t)}},c=a({chart:{type:"area",stacked:!0,height:350,zoom:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"smooth"},xaxis:{categories:[],labels:{show:!1}},tooltip:{x:{format:"dd/MM/yy"}},fill:{opacity:1}}),g=a([]),D=async()=>{try{const t=await o.get("/api/metrics/incidents/ascending-vs-descending");c.value={...c.value,xaxis:{categories:t.data.categories,labels:{show:!1}}},g.value=t.data.series}catch(t){console.log(t)}},l=a({chart:{type:"pie"},legend:{position:"bottom"},labels:[]}),x=a([]),w=async()=>{try{const t=await o.get("/api/metrics/incidents/route-cause-distribution");l.value={...l.value,labels:t.data.categories},x.value=t.data.series}catch(t){console.log(t)}},p=a({chart:{type:"bar"},plotOptions:{bar:{horizontal:!1,columnWidth:"55%",endingShape:"rounded",dataLabels:{position:"top"}},distributed:!0},dataLabels:{enabled:!1,formatter(t){return`${t} Incidents`},offsetY:-20,style:{fontSize:"12px",colors:["#304758"]}},xaxis:{categories:[]}}),y=a([]),C=async()=>{try{const t=await o.get("/api/metrics/incidents/environmental-impact");p.value={...p.value,xaxis:{categories:t.data.categories}},y.value=t.data.series}catch(t){console.log(t)}},b=a({chart:{type:"bubble"},colors:["#FF9800"],xaxis:{type:"numeric",title:{text:"Client Average Age"},tickAmount:12},yaxis:{show:!0,type:"numeric",title:{text:"Client Ability (1 - Low, 2 - Medium, 3 - High)"},max:4},plotOptions:{bubble:{minBubbleRadius:10,maxBubbleRadius:30}}}),v=a([]);return{chartDataIncidentsByLocationOptions:r,chartDataIncidentsByLocationSeries:u,getIncidentCountByLocationData:_,chartDataIncidentFrequencyOverTimeOptions:n,chartDataIncidentFrequencyOverTimeSeries:h,getIncidentFrequencyOverTimeData:f,chartDataASCvsDESCOptions:c,chartDataASCvsDESCSeries:g,getASCvsDESCData:D,chartDataRootCauseDistributionOptions:l,chartDataRootCauseDistributionSeries:x,getRootCauseDistributionData:w,chartDataEnvironmentalImpactOptions:p,chartDataEnvironmentalImpactSeries:y,getEnvironmentalImpactData:C,chartDataClientAbilityAndAgeOptions:b,chartDataClientAbilityAndAgeSeries:v,getClientAbilityAndAgeData:async()=>{try{const t=await o.get("/api/metrics/incidents/client-age-and-ability");v.value=t.data.series}catch(t){console.log(t)}}}}const s=o=>(R("data-v-d74f4342"),o=o(),F(),o),z=s(()=>e("p",{class:"my-6 text-sm text-gray-500"}," The following charts are based on the data from the incidents that have been reported. ",-1)),N={class:"mb-3 grid grid-cols-1 gap-3 xl:grid-cols-2"},V={class:"flex flex-col rounded-2xl border bg-white shadow"},H={class:"xl:p-3"},P=s(()=>e("p",{class:"mt-auto border-t bg-gray-50 p-3 text-xs italic text-neutral-500"}," Incident occurrence by location and level. ",-1)),W={class:"flex flex-col rounded-2xl border bg-white shadow"},Y={class:"flex flex-1 items-center justify-center xl:p-3"},$=s(()=>e("p",{class:"mt-auto border-t bg-gray-50 p-3 text-xs italic text-neutral-500"}," Incidents per day over time. ",-1)),G={class:"grid grid-cols-1 gap-3 xl:grid-cols-3"},J={class:"flex flex-col rounded-2xl border bg-white shadow"},K={class:"flex flex-1 items-center justify-center xl:p-3"},Q=s(()=>e("p",{class:"mt-auto border-t bg-gray-50 p-3 text-xs italic text-neutral-500"}," Ascending vs. descending incidents. ",-1)),U={class:"col-span-1 flex flex-col rounded-2xl border bg-white shadow xl:col-span-2"},X={class:"xl:p-3"},Z=s(()=>e("p",{class:"mt-auto border-t bg-gray-50 p-3 text-xs italic text-neutral-500"}," Environmental condition distribution. ",-1)),tt={class:"col-span-1 flex flex-col rounded-2xl border bg-white shadow xl:col-span-2"},et={class:"flex flex-1 items-center justify-center p-0 xl:p-32"},it=s(()=>e("p",{class:"mt-auto border-t bg-gray-50 p-3 text-xs italic text-neutral-500"}," Root cause distribution. ",-1)),at={class:"flex flex-col rounded-2xl border bg-white shadow"},ot={class:"flex flex-1 items-center justify-center xl:p-3"},st=s(()=>e("p",{class:"mt-auto border-t bg-gray-50 p-3 text-xs italic text-neutral-500"}," Client age and ability distribution. ",-1)),I=S({__name:"Incidents",setup(o){const{chartDataIncidentsByLocationOptions:r,chartDataIncidentsByLocationSeries:u,getIncidentCountByLocationData:_,chartDataIncidentFrequencyOverTimeOptions:n,chartDataIncidentFrequencyOverTimeSeries:h,getIncidentFrequencyOverTimeData:f,chartDataASCvsDESCOptions:c,chartDataASCvsDESCSeries:g,getASCvsDESCData:D,chartDataRootCauseDistributionOptions:l,chartDataRootCauseDistributionSeries:x,getRootCauseDistributionData:w,chartDataEnvironmentalImpactOptions:p,chartDataEnvironmentalImpactSeries:y,getEnvironmentalImpactData:C,chartDataClientAbilityAndAgeOptions:b,chartDataClientAbilityAndAgeSeries:v,getClientAbilityAndAgeData:A}=j();return O(async()=>{await Promise.all([_(),f(),D(),w(),C(),A()])}),(t,rt)=>{const d=M("apexchart");return E(),B(q,{"main-content-title":"Incident Metrics"},{default:L(()=>[e("div",null,[z,e("div",N,[e("div",V,[e("div",H,[m(d,{width:"100%",type:i(r).chart.type,options:i(r),series:i(u)},null,8,["type","options","series"])]),P]),e("div",W,[e("div",Y,[m(d,{width:"100%",type:i(n).chart.type,options:i(n),series:i(h)},null,8,["type","options","series"])]),$])]),e("div",G,[e("div",J,[e("div",K,[m(d,{width:"100%",type:i(c).chart.type,options:i(c),series:i(g)},null,8,["type","options","series"])]),Q]),e("div",U,[e("div",X,[m(d,{width:"100%",type:i(p).chart.type,options:i(p),series:i(y)},null,8,["type","options","series"])]),Z]),e("div",tt,[e("div",et,[m(d,{width:"100%",type:i(l).chart.type,options:i(l),series:i(x)},null,8,["type","options","series"])]),it]),e("div",at,[e("div",ot,[m(d,{width:"100%",type:i(b).chart.type,options:i(b),series:i(v)},null,8,["type","options","series"])]),st])])])]),_:1})}}}),Ie=T(I,[["__scopeId","data-v-d74f4342"]]);I.__docgenInfo={exportName:"default",displayName:"Incidents",description:"",tags:{},sourceFiles:["D:/work/server/htdocs/aa-portal.is/src/pages/metrics/Incidents.vue"]};export{Ie as default};
