{"version":3,"file":"PickupsBookingList-o7PJ9ACL.js","sources":["../../src/widgets/pickups-booking-list/PickupsBookingList.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { computed, toRefs } from 'vue'\n\nimport type { TourBooking } from '@/shared/types'\nimport { BookingListItem } from '../booking-list/ui/item'\n\nconst props = defineProps<{\n  tourBookings: TourBooking[]\n  tourCode: string\n  startTime: string\n}>()\n\nconst { tourBookings } = toRefs(props)\n\nconst pickupPlaces = computed(() => {\n  const filteredBookings = tourBookings.value\n    .filter((booking, index, self) => {\n      return self.findIndex((b) => b.pickupPlace?.id === booking.pickupPlace?.id) === index\n    })\n\n  const mappedPlaces = filteredBookings.map((booking) => {\n    if (!booking.pickupPlace) {\n      return {\n        name: 'No pickup place',\n        id: 0,\n      }\n    }\n    return booking.pickupPlace\n  })\n\n  return mappedPlaces\n})\n\nconst bookingsByPickupPlace = (pickupPlaceId: number) => {\n  if (pickupPlaceId === 0) {\n    return tourBookings.value.filter((booking) => booking.pickupPlace === null)\n  }\n\n  return tourBookings.value.filter((booking) => booking.pickupPlace?.id === pickupPlaceId)\n}\n</script>\n\n<template>\n  <div class=\"divide-y @container\">\n    <div v-for=\"place in pickupPlaces\" :key=\"place.id\">\n      <p class=\"py-3\">\n        {{ place.name }}\n      </p>\n      <BookingListItem\n        v-for=\"({\n          id,\n          status,\n          booking: { mainPassenger },\n          code,\n          link,\n          waiverStatus,\n          totalPassengerCount: totalPassengerCapacity,\n          arrivedPassengerCount: totalPassengerCount,\n          passengerBookings,\n        }) in bookingsByPickupPlace(place.id)\"\n        :key=\"id\"\n\n        :tour-booking-id=\"id\"\n        :tour-code=\"tourCode\"\n        :start-time=\"startTime\"\n        :main-passenger-name=\"mainPassenger?.name\"\n        :main-passenger-email=\"mainPassenger?.email\"\n        :main-passenger-phone=\"mainPassenger?.phone\"\n        :tour-booking-code=\"code\"\n        :tour-booking-url=\"link\"\n        :waiver-status=\"waiverStatus\"\n        :status=\"status\"\n        :total-count=\"totalPassengerCapacity\"\n        :arrived-count=\"totalPassengerCount\"\n        :extra-bookings=\"passengerBookings?.flatMap((passengerBooking) => passengerBooking.extraBookings ?? []) ?? []\"\n      />\n    </div>\n  </div>\n</template>\n"],"names":["props","__props","tourBookings","toRefs","pickupPlaces","computed","booking","index","self","b","_a","_b","bookingsByPickupPlace","pickupPlaceId"],"mappings":"4TAMA,MAAMA,EAAQC,EAMR,CAAE,aAAAC,CAAA,EAAiBC,EAAOH,CAAK,EAE/BI,EAAeC,EAAS,IACHH,EAAa,MACnC,OAAO,CAACI,EAASC,EAAOC,IAChBA,EAAK,UAAWC,GAAM,SAAA,QAAAC,EAAAD,EAAE,cAAF,YAAAC,EAAe,QAAOC,EAAAL,EAAQ,cAAR,YAAAK,EAAqB,IAAE,IAAMJ,CACjF,EAEmC,IAAKD,GACpCA,EAAQ,YAMNA,EAAQ,YALN,CACL,KAAM,kBACN,GAAI,CAAA,CAIT,CAGF,EAEKM,EAAyBC,GACzBA,IAAkB,EACbX,EAAa,MAAM,OAAQI,GAAYA,EAAQ,cAAgB,IAAI,EAGrEJ,EAAa,MAAM,OAAQI,GAAY,OAAA,QAAAI,EAAAJ,EAAQ,cAAR,YAAAI,EAAqB,MAAOG,EAAa"}