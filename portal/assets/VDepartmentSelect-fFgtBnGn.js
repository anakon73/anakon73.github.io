import{e as h,R as u,Q as P,j as S,q,w as p,o as r,k as i,G as c,D as f,J as k,S as w,l as V,F as x,H as I,C as v,u as l,b as O}from"./vue.esm-bundler-CYPfFjdk.js";import{P as A}from"./ProgressSpinner-lCLkagxy.js";import{u as M}from"./useDepartment-RZahlhen.js";import{a as N}from"./preview-D0Pi-YKn.js";import{u as R}from"./useAuth-8d_1_S6I.js";const C={key:0,class:"mb-2 text-sm font-medium text-gray-700"},B=["disabled"],F=["value"],U={key:1,class:"absolute inset-0 flex items-center justify-center"},j=h({__name:"VDepartmentSelect",props:u({departmentOptions:{default:()=>[]},initialSelectedDepartment:{default:null},label:{},departmentPermissionsRequired:{default:()=>[]}},{modelValue:{},modelModifiers:{}}),emits:u(["updatePrimaryDepartment"],["update:modelValue"]),setup(t,{emit:D}){const g=D,{actionIsInProgress:m}=N(),{userHasSomePermissionsInDepartment:y}=R(),{departmentActions:o,apiGetDepartments:b}=M(),s=P(t,"modelValue"),a=S([]);return q(async()=>{if(t.departmentOptions.length>0){a.value=t.departmentOptions,t.initialSelectedDepartment&&(s.value=t.initialSelectedDepartment);return}a.value=await b(),t.departmentPermissionsRequired.length>0?a.value=a.value.filter(e=>y(t.departmentPermissionsRequired,e)):a.value=t.departmentOptions}),p(s,e=>{e&&g("updatePrimaryDepartment",e)}),p(()=>t.departmentOptions,e=>{e.length===1&&(s.value=e[0])},{deep:!0,immediate:!0}),(e,d)=>(r(),i("div",{class:v(["relative",{"cursor-not-allowed opacity-50":l(m)(l(o).getDepartments),hidden:a.value.length===1}])},[e.label?(r(),i("p",C,c(e.label),1)):f("",!0),k(V("select",{"onUpdate:modelValue":d[0]||(d[0]=n=>s.value=n),class:v(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:min-w-[250px] sm:text-sm",{"bg-gray-200 bg-none":a.value.length===1}]),disabled:a.value.length===1},[(r(!0),i(x,null,I(a.value,n=>(r(),i("option",{key:n.id,value:n},c(n.name),9,F))),128))],10,B),[[w,s.value]]),l(m)(l(o).getDepartments)?(r(),i("div",U,[O(A,{class:"h-4 w-4 text-blue-500"})])):f("",!0)],2))}});j.__docgenInfo={exportName:"default",displayName:"VDepartmentSelect",description:"",tags:{},props:[{name:"departmentOptions",required:!1,type:{name:"Array",elements:[{name:"IDepartment"}]}},{name:"initialSelectedDepartment",required:!1,type:{name:"union",elements:[{name:"IUserDepartment"},{name:"null"}]}},{name:"label",required:!1,type:{name:"string"}},{name:"departmentPermissionsRequired",required:!1,type:{name:"Array",elements:[{name:"AppPermissions"}]}}],events:[{name:"updatePrimaryDepartment",type:{names:["IDepartment"]}}],sourceFiles:["D:/work/server/htdocs/aa-portal.is/src/shared/ui/inputs/VDepartmentSelect.vue"]};export{j as _};
