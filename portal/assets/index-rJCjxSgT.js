import{e as C,z as I,g as n,j as S,o as m,k as l,l as p,b as u,u as t,B as v,F as N,C as $,G as c,x as F,A as d,D as f}from"./vue.esm-bundler-CYPfFjdk.js";import{b as V}from"./index-baqd9Qr3.js";import{_ as z}from"./BookingList-CDoBSkdQ.js";import{_ as A}from"./DepartureUpdateComment-2rt04tFb.js";import"./DepartureUpdateCommentPopover-euFlcGix.js";import{c as j}from"./lib-Fy6oBlQ3.js";import{a as i}from"./models-qWR1FMGP.js";import{k as T}from"./query-G1AwWss6.js";import{M as L}from"./preview-D0Pi-YKn.js";import{_ as M}from"./POverlay-3jPNvx4x.js";import{I as q}from"./IconPerson-i3ljUCnk.js";import{_ as h}from"./Stepper-So6bJAoF.js";import{_ as E}from"./PickupsBookingList-o7PJ9ACL.js";import"./BookingListItem-nUQtT88m.js";import"./BookingUpdatePassengerCount-Op_2kbz-.js";import"./schemas-74JEr9Jm.js";import"./index-LmGWO5sK.js";import"./vue-router-E7v71uM3.js";import"./routes-WhYxSpGG.js";import"./query-RcMfahOO.js";import"./PNumberInput-bPLMBx_c.js";import"./PlusIcon-Ow_R-r7y.js";import"./PPopoverPanel-RNuJphX8.js";import"./headlessui-float-sqR0azf2.js";import"./transition-qpXhaAaU.js";import"./keyboard-64MH3N5t.js";import"./open-closed-nhb_Ydho.js";import"./use-root-containers-gEPBKDr2.js";import"./use-resolve-button-type-49aRxFpo.js";import"./BookingUpdateStatus-AyCPQGTD.js";import"./listbox-3RN1mHPV.js";import"./form-TGXPuq_M.js";import"./CheckCircleIcon-akbq8cGf.js";import"./ChevronDownIcon-AgxEjrtE.js";import"./IconBus-0QPjtZ9u.js";import"./_plugin-vue_export-helper-x3n3nnut.js";import"./PTextarea-Wrr33MR5.js";import"./CheckIcon-WRJIoum8.js";import"./index-05uTbNHo.js";import"./chunk-UXHY756F-iEg6Hh0Y.js";import"./index-C1vJkiWb.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./preview-errors-7FWlPnjy.js";import"./index-PPLHz8o0.js";import"./PDays-npMhi6Nw.js";import"./index-TCXC35p5.js";import"./iframe-ufxlS10p.js";import"../sb-preview/runtime.js";import"./DepartureList-w5NrqMJ9.js";import"./DepartureAssignStaffAndVehicles-8AoBdfT8.js";import"./api-B2HcjM2j.js";import"./api-cJzoLyfI.js";import"./PButton-h9_xezBg.js";import"./index-VqpYtbVe.js";import"./PInput-iZb_REtl.js";import"./SuggestedUser-4kWsZiWj.js";import"./PAvatar-wq6oK0Zr.js";import"./PlusCircleIcon-aSiXn_Mr.js";import"./SuggestedVehicle-r1TyKt-D.js";import"./ScheduledUser-esbe3tjU.js";import"./VehicleTitle-0pOySBND.js";import"./XMarkIcon-_tXc_TyD.js";import"./PPhoneLink-wKLYRG_F.js";import"./PAlert-quHLeqTA.js";import"./XMarkIcon-t43a1P5Z.js";import"./PDialogTitle-rfxNVwSR.js";import"./description-LPuBJoU_.js";import"./DepartureListItem-I88AIHqM.js";import"./DepartureUpdateStatus-zdhd3wV8.js";import"./PListboxLabel-U39qo3cm.js";import"./PToggle-mLVcOzrp.js";import"./PRadio-sGATo2dT.js";import"./index-bhXQ3okY.js";import"./isNativeReflectConstruct-ubdnbphT.js";import"./mock-vjhcKIQW.js";import"./index-1aVAeLWL.js";import"./mock-UR5nntqf.js";import"./mock-CzN7Q16W.js";import"./mock-YoOI-P8k.js";import"./mock-psFphV_9.js";import"./mock-OgPWcINV.js";import"./PSpinner-cF72MsvC.js";import"./PCircularProgress-gD-yL9l9.js";const G={class:"fixed bottom-0 z-20 w-full border bg-white px-10 pb-7 pt-5 shadow-md md:hidden"},R={key:0,class:"flex flex-col gap-6"},H={class:"flex justify-between"},J={class:"flex flex-col gap-2"},K={class:"font-medium"},O={class:"flex gap-1"},Q={class:"hidden md:flex"},U=C({__name:"DepartureShowPage",props:{departureId:{}},setup(k){const x=k,{departureId:P}=I(x),{data:o,isLoading:b,isFetched:w}=T({scheduledDepartureId:P}),{cloned:g}=V(n(()=>{var e;return!!((e=o.value)!=null&&e.comment)})),B=n(()=>{var e;return j(((e=o.value)==null?void 0:e.tourBookings)??[])}),y=n(()=>{var e,r;return((r=(e=o.value)==null?void 0:e.tourBookings)==null?void 0:r.filter(s=>s.status==="arrived"||s.status==="noshow"||s.status==="droppedoff"))||[]}),D=n(()=>{var r,s;const e=((s=(r=o.value)==null?void 0:r.tourBookings)==null?void 0:s.length)||0;return e>0?y.value.length/e*100:0}),a=S(i.Passengers),_=n(()=>[{title:"Pickup",progress:D.value,action:()=>a.value=i.Pickup,active:a.value===i.Pickup},{title:"Passengers",progress:0,action:()=>a.value=i.Passengers,active:a.value===i.Passengers}]);return(e,r)=>(m(),l(N,null,[p("div",G,[u(t(h),{steps:_.value},null,8,["steps"])]),u(L,{"main-content-title":"Departure"},{default:v(()=>[u(t(M),{show:t(b),class:$(["mt-6",!t(w)&&"min-h-60"])},{default:v(()=>[t(o)?(m(),l("div",R,[p("div",H,[p("div",J,[p("p",K,c(t(o).departure.time)+" "+c(t(o).tour.name),1),p("div",O,[u(q,{class:"size-5"}),F(" "+c(B.value),1)])]),p("div",Q,[u(t(h),{steps:_.value,class:"justify-end"},null,8,["steps"])])]),t(g)?(m(),d(t(A),{key:0,"scheduled-departure-id":t(o).id,comment:t(o).comment},null,8,["scheduled-departure-id","comment"])):(m(),l("button",{key:1,class:"self-end text-blue-500 transition-colors hover:text-blue-800",onClick:r[0]||(r[0]=s=>g.value=!0)}," Add comment ")),a.value===t(i).Passengers?(m(),d(t(z),{key:2,"tour-bookings":t(o).tourBookings,"tour-code":t(o).tour.code,"start-time":t(o).departure.time},null,8,["tour-bookings","tour-code","start-time"])):f("",!0),a.value===t(i).Pickup?(m(),d(t(E),{key:3,"tour-bookings":t(o).tourBookings,"tour-code":t(o).tour.code,"start-time":t(o).departure.time},null,8,["tour-bookings","tour-code","start-time"])):f("",!0)])):f("",!0)]),_:1},8,["show","class"])]),_:1})],64))}});U.__docgenInfo={exportName:"default",displayName:"DepartureShowPage",description:"",tags:{},props:[{name:"departureId",required:!0,type:{name:"TSIndexedAccessType"}}],sourceFiles:["D:/work/server/htdocs/aa-portal.is/src/pages/departure/show/DepartureShowPage.vue"]};export{U as DepartureShowPage,U as default};
