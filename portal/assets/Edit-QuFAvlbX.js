import{e as N,z as V,j as y,q as D,n as M,V as R,w as j,o as s,A as l,B as p,E as U,l as e,u as o,b as d,k as h,J as z,P as A,G as x,D as c,T as b,N as P,F as q}from"./vue.esm-bundler-CYPfFjdk.js";import{L as n}from"./leaflet-src-KPccyqlJ.js";import{R as $}from"./RightDrawer-Lpr6admO.js";import{a as G}from"./preview-D0Pi-YKn.js";import{I as J}from"./IconClose-tbzieUCA.js";import{P as B}from"./ProgressSpinner-lCLkagxy.js";import{_ as W,a as H}from"./ActionErrorAlert--bGVRXV4.js";import{u as K}from"./useStaffBases-evfeXodR.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./_plugin-vue_export-helper-x3n3nnut.js";import"./chunk-UXHY756F-iEg6Hh0Y.js";import"./index-C1vJkiWb.js";import"./vue-router-E7v71uM3.js";import"./preview-errors-7FWlPnjy.js";import"./index-PPLHz8o0.js";import"./schemas-74JEr9Jm.js";import"./index-LmGWO5sK.js";import"./routes-WhYxSpGG.js";import"./models-qWR1FMGP.js";import"./PDays-npMhi6Nw.js";import"./index-baqd9Qr3.js";import"./index-TCXC35p5.js";import"./index-05uTbNHo.js";import"./PPopoverPanel-RNuJphX8.js";import"./headlessui-float-sqR0azf2.js";import"./transition-qpXhaAaU.js";import"./keyboard-64MH3N5t.js";import"./open-closed-nhb_Ydho.js";import"./use-root-containers-gEPBKDr2.js";import"./use-resolve-button-type-49aRxFpo.js";import"./iframe-ufxlS10p.js";import"../sb-preview/runtime.js";import"./query-G1AwWss6.js";import"./ChevronDownIcon-AgxEjrtE.js";import"./listbox-3RN1mHPV.js";import"./form-TGXPuq_M.js";import"./DepartureList-w5NrqMJ9.js";import"./DepartureAssignStaffAndVehicles-8AoBdfT8.js";import"./api-B2HcjM2j.js";import"./api-cJzoLyfI.js";import"./PButton-h9_xezBg.js";import"./index-VqpYtbVe.js";import"./PInput-iZb_REtl.js";import"./POverlay-3jPNvx4x.js";import"./PSpinner-cF72MsvC.js";import"./IconBus-0QPjtZ9u.js";import"./IconPerson-i3ljUCnk.js";import"./SuggestedUser-4kWsZiWj.js";import"./PAvatar-wq6oK0Zr.js";import"./PlusCircleIcon-aSiXn_Mr.js";import"./SuggestedVehicle-r1TyKt-D.js";import"./ScheduledUser-esbe3tjU.js";import"./VehicleTitle-0pOySBND.js";import"./XMarkIcon-_tXc_TyD.js";import"./PPhoneLink-wKLYRG_F.js";import"./PAlert-quHLeqTA.js";import"./CheckCircleIcon-akbq8cGf.js";import"./XMarkIcon-t43a1P5Z.js";import"./PDialogTitle-rfxNVwSR.js";import"./description-LPuBJoU_.js";import"./DepartureListItem-I88AIHqM.js";import"./DepartureUpdateComment-2rt04tFb.js";import"./PTextarea-Wrr33MR5.js";import"./DepartureUpdateCommentPopover-euFlcGix.js";import"./DepartureUpdateStatus-zdhd3wV8.js";import"./PListboxLabel-U39qo3cm.js";import"./CheckIcon-WRJIoum8.js";import"./lib-Fy6oBlQ3.js";import"./PToggle-mLVcOzrp.js";import"./PRadio-sGATo2dT.js";import"./index-bhXQ3okY.js";import"./isNativeReflectConstruct-ubdnbphT.js";import"./mock-vjhcKIQW.js";import"./index-1aVAeLWL.js";import"./mock-UR5nntqf.js";import"./mock-CzN7Q16W.js";import"./mock-YoOI-P8k.js";import"./mock-psFphV_9.js";import"./mock-OgPWcINV.js";import"./IconTickMarkCircle-2_sKm8Jk.js";const O={class:"isolate flex flex-col items-center justify-center border-l bg-white pb-6"},Q={class:"sticky top-0 z-[9999999] flex w-full items-center justify-end bg-white p-6"},X=e("div",{class:"mb-6"},[e("h3",{class:"text-base font-semibold leading-6 text-gray-900"}," View/Edit Staff Base. "),e("p",{class:"mt-1 text-sm text-gray-500"}," Use the form below to update this staff base. ")],-1),Y={class:"grid grid-cols-1 gap-x-4 gap-y-6 pt-6"},Z=e("label",{for:"staff_base_name",class:"block text-sm font-medium text-gray-700"}," Staff Base Name ",-1),tt={class:"mt-1"},et=e("div",{id:"map",class:"h-[400px] w-full bg-gray-100"},null,-1),at={class:"text-xs italic text-gray-500"},ot={class:"relative pt-5"},it={class:"flex items-center justify-end"},st={class:"flex items-center"},rt={key:0},mt=N({__name:"Edit",props:{staffBaseId:{}},setup(w){const S=w,{staffBaseId:u}=V(S),{validateForm:k,actionIsInProgress:f,actionIsInError:I,actionIsInSuccess:E}=G(),{staffBaseActions:r,getStaffBaseById:_,editStaffBase:L}=K(),g=y(null),t=y(null),T=async()=>{const i=await k(g.value,()=>L(t.value));i&&(t.value=i)};let a=null;const v=()=>{a=n.map("map",{center:[+t.value.latitude,+t.value.longitude],zoom:11}),n.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}").addTo(a);let i=n.marker([+t.value.latitude,+t.value.longitude]).addTo(a);a.on("click",m=>{t.value.latitude=m.latlng.lat.toString(),t.value.longitude=m.latlng.lng.toString(),i&&a.removeLayer(i),i=n.marker([m.latlng.lat,m.latlng.lng]).addTo(a)}),a.setView(new n.LatLng(+t.value.latitude,+t.value.longitude),11)};return D(async()=>{t.value=await _(u.value.toString()),await M(()=>{setTimeout(()=>v(),400)})}),R(()=>{a&&(a.off(),a.remove())}),j(u,async i=>{i&&(t.value=await _(i.toString()),a&&(a.off(),a.remove()),v())}),(i,m)=>{const C=U("RouterLink");return s(),l($,null,{default:p(()=>[e("div",O,[e("div",Q,[o(f)(o(r).getStaffBaseById)||o(f)(o(r).editStaffBase)?(s(),l(B,{key:0,class:"h-5 w-5 text-blue-500"})):(s(),l(C,{key:1,to:{name:i.$Routes.StaffBases}},{default:p(()=>[d(J,{class:"h-5 w-5 fill-red-400"})]),_:1},8,["to"]))]),e("form",{id:"edit_staff_base_form",ref_key:"editStaffBaseFormElement",ref:g,class:"w-full space-y-8 divide-y divide-gray-200 px-6 md:px-12"},[X,t.value?(s(),h(q,{key:0},[e("div",Y,[e("div",null,[Z,e("div",tt,[z(e("input",{id:"staff_base_name","onUpdate:modelValue":m[0]||(m[0]=F=>t.value.name=F),type:"text",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",required:""},null,512),[[A,t.value.name]])])]),et,e("p",at,x(t.value.latitude)+", "+x(t.value.longitude),1)]),e("div",ot,[e("div",it,[d(b,{name:"alert"},{default:p(()=>[o(E)(o(r).editStaffBase)?(s(),l(W,{key:0,action:o(r).editStaffBase},null,8,["action"])):c("",!0)]),_:1}),d(b,{name:"alert"},{default:p(()=>[o(I)(o(r).editStaffBase)?(s(),l(H,{key:0,action:o(r).editStaffBase},null,8,["action"])):c("",!0)]),_:1}),e("div",st,[e("button",{class:"ml-3 inline-flex h-9 items-center justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm focus:outline-none hover:bg-blue-700",onClick:P(T,["prevent"])},[o(f)(o(r).editStaffBase)?(s(),l(B,{key:1,class:"h-3 w-3 text-white"})):(s(),h("span",rt," Apply Changes "))])])])])],64)):c("",!0)],512)])]),_:1})}}});mt.__docgenInfo={exportName:"default",displayName:"Edit",description:"",tags:{},props:[{name:"staffBaseId",required:!0,type:{name:"number"}}],sourceFiles:["D:/work/server/htdocs/aa-portal.is/src/pages/staff-bases/Edit.vue"]};export{mt as default};
