import{o as r,k as o,l as a,j as C,e as P,R as ve,Q as ke,C as H,u as v,b as D,x as Q,D as b,F as B,H as A,B as U,T as j,G as O,g as N,q as ye,w as W,A as M,a0 as _e,a1 as Se}from"./vue.esm-bundler-CYPfFjdk.js";import{u as Y,a as be}from"./vue-router-E7v71uM3.js";import{u as Z,a as V,A as R,M as xe}from"./preview-D0Pi-YKn.js";import{_ as we}from"./VDataFilters-2mcnRfw0.js";import{d as Te,s as Ie,u as De}from"./schemas-74JEr9Jm.js";import{_ as q}from"./_plugin-vue_export-helper-x3n3nnut.js";import{P as K}from"./ProgressSpinner-lCLkagxy.js";import{I as Be}from"./IconPhone-VcVxsafe.js";import{I as Ae}from"./IconAccount-3MIbJHaP.js";import{I as Ce}from"./IconTickMarkCircle-2_sKm8Jk.js";import{R as X}from"./routes-WhYxSpGG.js";import{u as He}from"./useAuth-8d_1_S6I.js";import"./chunk-UXHY756F-iEg6Hh0Y.js";import"./index-C1vJkiWb.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./preview-errors-7FWlPnjy.js";import"./index-PPLHz8o0.js";import"./PDays-npMhi6Nw.js";import"./index-baqd9Qr3.js";import"./index-TCXC35p5.js";import"./index-05uTbNHo.js";import"./PPopoverPanel-RNuJphX8.js";import"./index-LmGWO5sK.js";import"./headlessui-float-sqR0azf2.js";import"./transition-qpXhaAaU.js";import"./keyboard-64MH3N5t.js";import"./open-closed-nhb_Ydho.js";import"./use-root-containers-gEPBKDr2.js";import"./use-resolve-button-type-49aRxFpo.js";import"./iframe-ufxlS10p.js";import"../sb-preview/runtime.js";import"./query-G1AwWss6.js";import"./ChevronDownIcon-AgxEjrtE.js";import"./listbox-3RN1mHPV.js";import"./form-TGXPuq_M.js";import"./DepartureList-w5NrqMJ9.js";import"./DepartureAssignStaffAndVehicles-8AoBdfT8.js";import"./api-B2HcjM2j.js";import"./api-cJzoLyfI.js";import"./PButton-h9_xezBg.js";import"./index-VqpYtbVe.js";import"./PInput-iZb_REtl.js";import"./POverlay-3jPNvx4x.js";import"./PSpinner-cF72MsvC.js";import"./IconBus-0QPjtZ9u.js";import"./IconPerson-i3ljUCnk.js";import"./SuggestedUser-4kWsZiWj.js";import"./PAvatar-wq6oK0Zr.js";import"./PlusCircleIcon-aSiXn_Mr.js";import"./SuggestedVehicle-r1TyKt-D.js";import"./ScheduledUser-esbe3tjU.js";import"./VehicleTitle-0pOySBND.js";import"./XMarkIcon-_tXc_TyD.js";import"./PPhoneLink-wKLYRG_F.js";import"./PAlert-quHLeqTA.js";import"./CheckCircleIcon-akbq8cGf.js";import"./XMarkIcon-t43a1P5Z.js";import"./PDialogTitle-rfxNVwSR.js";import"./description-LPuBJoU_.js";import"./DepartureListItem-I88AIHqM.js";import"./DepartureUpdateComment-2rt04tFb.js";import"./PTextarea-Wrr33MR5.js";import"./DepartureUpdateCommentPopover-euFlcGix.js";import"./DepartureUpdateStatus-zdhd3wV8.js";import"./models-qWR1FMGP.js";import"./PListboxLabel-U39qo3cm.js";import"./CheckIcon-WRJIoum8.js";import"./lib-Fy6oBlQ3.js";import"./PToggle-mLVcOzrp.js";import"./PRadio-sGATo2dT.js";import"./index-bhXQ3okY.js";import"./isNativeReflectConstruct-ubdnbphT.js";import"./mock-vjhcKIQW.js";import"./index-1aVAeLWL.js";import"./mock-UR5nntqf.js";import"./mock-CzN7Q16W.js";import"./mock-YoOI-P8k.js";import"./mock-psFphV_9.js";import"./mock-OgPWcINV.js";import"./useDepartment-RZahlhen.js";import"./useOperationalBase-kvvO22e1.js";import"./useRole-JNprELZd.js";const ee={},Oe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Le=a("path",{d:"M17,7V3H7V7H17M14,17A3,3 0 0,0 17,14A3,3 0 0,0 14,11A3,3 0 0,0 11,14A3,3 0 0,0 14,17M19,1L23,5V17A2,2 0 0,1 21,19H7C5.89,19 5,18.1 5,17V3A2,2 0 0,1 7,1H19M1,7H3V21H17V23H3A2,2 0 0,1 1,21V7Z"},null,-1),Ee=[Le];function Me(n,k){return r(),o("svg",Oe,Ee)}const $e=q(ee,[["render",Me]]);ee.__docgenInfo={displayName:"IconSave",description:"",tags:{},sourceFiles:["D:/work/server/htdocs/aa-portal.is/src/shared/ui/icons/IconSave.vue"]};const Ne=Te("tasks",()=>{const n=C([]);function k(l){n.value=l}function x(l){n.value.push(l)}function I(l){const h=n.value.findIndex(_=>_.id===l.id);n.value[h]=l}function m(){n.value=[]}const u=C([]);function f(l){u.value=l}function S(l){u.value.push(l)}function c(l){const h=u.value.findIndex(_=>_.id===l.id);u.value[h]=l}function y(){u.value=[]}return{taskBasesIndex:n,setTaskBaseIndex:k,addTaskBaseToIndex:x,updateTaskBasesInIndex:I,resetTaskBasesStore:m,tasksIndex:u,setTasksIndex:f,addTaskToIndex:S,updateTasksInIndex:c,resetTasksStore:y}});function te(){const{apiClient:n}=Z(),{addToActionsInProgress:k,removeFromActionsInProgress:x,processActionError:I,resetActionsInError:m}=V(),{resetTaskBasesStore:u,resetTasksStore:f}=Ne(),S={getTasksByOperationalBase:{id:"getTasksByOperationalBase",successMessage:"Task retrieved successfully.",errorMessage:"Failed to retrieve task."}};return{taskActions:S,apiGetTasksByDepartmentAndOperationalBase:async(y,l)=>{m(),k(S.getTasksByOperationalBase);try{const h=await n.get("/api/tasks/get-by-department-and-operational-base",{params:{operationalBaseId:l.id,departmentId:y.id}});return x(S.getTasksByOperationalBase),h.data.tasks}catch(h){console.log(h),I(S.getTasksByOperationalBase,h)}},resetTasksStore:f,resetTaskBasesStore:u}}const se={},Ue={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Ve=a("path",{d:"M14.12,10.47L12,12.59L9.87,10.47L8.46,11.88L10.59,14L8.47,16.12L9.88,17.53L12,15.41L14.12,17.53L15.53,16.12L13.41,14L15.53,11.88L14.12,10.47M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9Z"},null,-1),qe=[Ve];function je(n,k){return r(),o("svg",Ue,qe)}const Re=q(se,[["render",je]]);se.__docgenInfo={displayName:"IconDeleteForever",description:"",tags:{},sourceFiles:["D:/work/server/htdocs/aa-portal.is/src/shared/ui/icons/IconDeleteForever.vue"]};function re(){const{apiClient:n}=Z(),{addToActionsInProgress:k,removeFromActionsInProgress:x,processActionError:I,processActionSuccess:m,resetActionsInError:u,resetActionsInSuccess:f}=V(),{user:S}=Ie(De()),c={getScheduleByDateAndDepartment:{id:"getScheduleByDateAndDepartment",successMessage:"Schedule retrieved successfully.",errorMessage:"There was a problem retrieving the schedule."},getTasksByLocation:{id:"getTasksByLocation",successMessage:"Tasks retrieved successfully.",errorMessage:"There was a problem retrieving tasks."},saveSchedule:{id:"saveSchedule",successMessage:"Schedule saved successfully.",errorMessage:"There was a problem saving the schedule."}};return{user:S,getScheduleByDateAndDepartment:async(h,_)=>{u(),k(c.getScheduleByDateAndDepartment);try{const g=_.id,L=await n.get("/api/schedule",{params:{date:h,departmentId:g}});return x(c.getScheduleByDateAndDepartment),L.data}catch(g){console.log(g),I(c.getScheduleByDateAndDepartment,g)}},scheduleActions:c,saveSchedule:async h=>{u(),f(),k(c.saveSchedule);try{await n.post("/api/schedule",h),x(c.saveSchedule),m(c.saveSchedule),setTimeout(()=>{f()},3e3)}catch(_){console.log(_),I(c.saveSchedule,_)}}}}const Pe={class:"mb-4 flex w-full flex-wrap items-start justify-start gap-1.5 rounded border border-gray-200 bg-white p-1.5"},Fe=["onClick"],ze={class:"flex flex-col items-start"},Ge={key:0,class:"block pt-0.5 font-medium leading-none",style:{"font-size":"9px"}},Je={class:"flex"},Qe=["src"],We={key:0,class:"absolute inset-0 z-50 flex min-h-[75px] items-center justify-center rounded bg-gray-100"},ae=P({__name:"TaskBar",props:ve({tasks:{},filterState:{}},{currentlySelectedTask:{},currentlySelectedTaskModifiers:{}}),emits:["update:currentlySelectedTask"],setup(n){const{actionIsInProgress:k}=V(),{scheduleActions:x}=re(),{taskActions:I}=te(),m=ke(n,"currentlySelectedTask"),u=f=>{m.value=f};return(f,S)=>(r(),o("div",Pe,[f.tasks.length?(r(),o("button",{key:0,class:H(["flex items-center rounded border border-gray-100 bg-white px-2 py-1 text-xs ring-gray-200",{ring:!m.value&&!v(k)(v(x).getScheduleByDateAndDepartment)}]),onClick:S[0]||(S[0]=c=>u(null))},[D(Re,{class:"mr-1 h-4 w-4 fill-gray-500"}),Q(" Eraser ")],2)):b("",!0),(r(!0),o(B,null,A(f.tasks,c=>{var y;return r(),o("button",{key:c.id,class:H(["relative flex items-center justify-center rounded border px-2 py-1 text-xs",[{ring:m.value&&m.value.id===c.id},c.class]]),onClick:l=>u(c)},[a("span",ze,[((y=f.filterState.selectedOperationalBase)==null?void 0:y.id)===0?(r(),o("span",Ge,O(c.operationalBase.name),1)):b("",!0),a("span",Je,[Q(O(c.name)+" ",1),c.iconUrl?(r(),o("img",{key:0,src:c.iconUrl,class:"ml-1",alt:"Task icon"},null,8,Qe)):b("",!0)])])],10,Fe)}),128)),D(j,null,{default:U(()=>[v(k)(v(x).getScheduleByDateAndDepartment)||v(k)(v(I).getTasksByOperationalBase)?(r(),o("div",We,[D(K,{class:"h-4 w-4 text-gray-500"})])):b("",!0)]),_:1})]))}});ae.__docgenInfo={exportName:"default",displayName:"TaskBar",description:"",tags:{},props:[{name:"tasks",required:!0,type:{name:"Array",elements:[{name:"ITask"}]}},{name:"filterState",required:!0,type:{name:"IDataFilters"}}],sourceFiles:["D:/work/server/htdocs/aa-portal.is/src/shared/ui/schedule/TaskBar.vue"]};const ne={},Ye={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Ze=a("path",{d:"M12.5,8C9.85,8 7.45,9 5.6,10.6L2,7V16H11L7.38,12.38C8.77,11.22 10.54,10.5 12.5,10.5C16.04,10.5 19.05,12.81 20.1,16L22.47,15.22C21.08,11.03 17.15,8 12.5,8Z"},null,-1),Ke=[Ze];function Xe(n,k){return r(),o("svg",Ye,Ke)}const et=q(ne,[["render",Xe]]);ne.__docgenInfo={displayName:"IconUndo",description:"",tags:{},sourceFiles:["D:/work/server/htdocs/aa-portal.is/src/shared/ui/icons/IconUndo.vue"]};var E=(n=>(n.HOLIDAY_REQUESTED="holiday-requested",n))(E||{});const oe=n=>(_e("data-v-fbe32c93"),n=n(),Se(),n),tt={key:0},st={key:0,class:"mb-3 flex h-[48px] w-full items-center justify-end rounded border border-gray-100 bg-white p-2"},rt={key:0,class:"flex gap-3"},at={key:0,class:"flex justify-center"},nt={class:"flex"},ot={class:"shrink-0"},lt={class:"ml-2"},it=["innerHTML"],ct={class:"h-[600px] w-full overflow-y-scroll scrollbar-thin scrollbar-track-gray-100 scrollbar-thumb-blue-500/25"},dt={class:"w-full border-collapse"},ut=oe(()=>a("td",{class:"sticky left-0 top-0 z-[100] border border-gray-100 bg-white"},null,-1)),pt={class:"sticky left-0 z-10 h-12 min-w-[130px] max-w-[130px] border border-gray-100 bg-white md:w-auto md:min-w-[300px]"},ht={class:"flex"},mt={class:"relative mx-2 flex h-8 w-8 items-center justify-center rounded-full bg-gray-100 py-1"},ft={key:0,class:"absolute bottom-[-2px] left-[-5px] flex h-5 w-4 items-center justify-center rounded bg-white shadow"},gt=["href","title"],vt=["src"],kt={class:"flex flex-1 flex-col overflow-hidden bg-white pr-2 text-left"},yt=["innerHTML"],_t={class:"hidden items-center justify-between md:flex"},St={class:"flex items-center justify-center space-x-1"},bt=["src","title"],xt={class:"flex items-center space-x-1"},wt=["innerHTML"],Tt=["innerHTML"],It=["innerHTML"],Dt=["innerHTML"],Bt={class:"relative flex h-12 min-w-[30px] items-center justify-center border border-gray-100 bg-white"},At=["onClick"],Ct=["src"],Ht=["onClick"],Ot={key:2,class:"absolute left-0 top-0 h-4 w-4 rounded-br bg-yellow-400"},Lt=oe(()=>a("td",{class:"sticky left-0 z-[100] border border-gray-100 bg-white"},null,-1)),Et={key:0},Mt={class:"sticky left-0 z-[100] border border-gray-100 bg-white text-right"},$t={class:"px-2 py-1 text-xs text-gray-600"},Nt=["textContent"],Ut={class:"flex h-8 items-center justify-center border border-gray-100 bg-white text-xs text-gray-600"},Vt=["textContent"],le=P({__name:"Schedule",props:{filterState:{},tasks:{},currentlySelectedTask:{}},setup(n){const{actionIsInProgress:k,getActionSuccessMessage:x,actionIsInSuccess:I}=V(),{userHasPermissionInDepartment:m,user:u}=He(),f=Y(),{getScheduleByDateAndDepartment:S,saveSchedule:c,scheduleActions:y}=re(),l=N(()=>n.filterState.selectedDepartment===null?!1:m(R.EDIT_SCHEDULE,n.filterState.selectedDepartment)),h=(t,d,e)=>{const s=d===t,i=(e==null?void 0:e.slug)===E.HOLIDAY_REQUESTED;return s&&i},_=C(!1),g=C({daysInMonth:[],staffSchedules:[]}),L=C({daysInMonth:[],staffSchedules:[]}),F=N(()=>g.value.staffSchedules.filter(t=>{var d,e;return(t.operationalBases.some(s=>{var i;return s.id===((i=n.filterState.selectedOperationalBase)==null?void 0:i.id)})||((d=n.filterState.selectedOperationalBase)==null?void 0:d.id)===0)&&(t.roles.some(s=>{var i;return s.id===((i=n.filterState.selectedRole)==null?void 0:i.id)})||((e=n.filterState.selectedRole)==null?void 0:e.id)===0)}).filter(t=>{var d,e;return t.id===((d=u.value)==null?void 0:d.id)||l.value||!((e=n.filterState.selectedOperationalBase)!=null&&e.privateStaffSchedules)})),ie=(t,d)=>t&&!!t[d],$=t=>N(()=>{const d=[];return g.value.daysInMonth.forEach(e=>{let s=0;F.value.forEach(i=>{i.schedule.forEach(p=>{var T,J;const w=((T=n.filterState.selectedOperationalBase)==null?void 0:T.id)===0||p.task&&p.task.operationalBase.id===((J=n.filterState.selectedOperationalBase)==null?void 0:J.id);p.task&&ie(p.task,t)&&e.date===p.date&&p.task.isOnShift&&w&&s++})}),d.push(s)}),d}),ce=$("isOnShift"),de=$("isGuide"),ue=$("isOffice"),pe=$("isDriver"),he=N(()=>[{label:"Staff on shift",value:ce.value},{label:"Guides on shift",value:de.value},{label:"Office on shift",value:ue.value},{label:"Drivers on shift",value:pe.value}]),z=(t,d)=>{if(_.value=!0,!d){t.task=null;return}if(t.task&&d.slug===E.HOLIDAY_REQUESTED&&t.task.slug!==E.HOLIDAY_REQUESTED){t.holiday_request=!t.holiday_request;return}else t.holiday_request=!1;d&&t.task&&t.task.id===d.id?t.task=null:t.task=d},me=(t,d,e)=>{var s;(((s=u.value)==null?void 0:s.id)===t.id&&e&&e.slug===E.HOLIDAY_REQUESTED||l.value)&&z(d,e)},fe=async()=>{await c(g.value),_.value=!1,L.value=JSON.parse(JSON.stringify(g.value))},ge=()=>{_.value=!1,g.value=JSON.parse(JSON.stringify(L.value))},G=async(t,d)=>{g.value={daysInMonth:[],staffSchedules:[]},g.value=await S(t,d),L.value=JSON.parse(JSON.stringify(g.value))};return ye(async()=>{await G(n.filterState.selectedMonth,n.filterState.selectedDepartment)}),W(()=>n.filterState,async(t,d)=>{const{selectedOperationalBase:e,selectedDepartment:s,selectedMonth:i}=t,p=d.selectedOperationalBase!==e,w=d.selectedDepartment!==s,T=d.selectedMonth!==i;(p||w||T)&&(await f.replace({name:X.Schedule,query:{date:t.selectedMonth}}),await G(t.selectedMonth,t.selectedDepartment))}),(t,d)=>g.value.staffSchedules.length?(r(),o("div",tt,[l.value||_.value?(r(),o("div",st,[_.value?(r(),o("div",rt,[a("button",{class:"flex w-[40px] items-center justify-center rounded-md border border-gray-300 bg-white p-1 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 hover:bg-gray-100",title:"Undo all changes",onClick:ge},[D(et,{class:"h-5 w-5 fill-gray-800"})]),D(j,null,{default:U(()=>[_.value?(r(),o("button",{key:0,class:"flex w-[40px] items-center justify-center rounded-md bg-blue-600 p-1 text-center text-sm font-semibold leading-6 text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600 hover:bg-blue-500",title:"Save all changes",onClick:fe},[v(k)(v(y).saveSchedule)?(r(),M(K,{key:0,class:"h-3 w-3 text-white"})):(r(),M($e,{key:1,class:"h-5 w-5 fill-white"}))])):b("",!0)]),_:1})])):b("",!0),D(j,{name:"save"},{default:U(()=>[v(I)(v(y).saveSchedule)?(r(),o("div",at,[a("div",nt,[a("div",ot,[D(Ce,{class:"h-5 w-5 fill-green-400"})]),a("div",lt,[a("p",{class:"text-sm text-green-700",innerHTML:v(x)(v(y).saveSchedule)},null,8,it)])])])):b("",!0)]),_:1})])):b("",!0),a("div",ct,[a("table",dt,[a("tbody",null,[a("tr",null,[ut,(r(!0),o(B,null,A(g.value.daysInMonth,e=>(r(),o("td",{key:e.date,class:"sticky top-0 z-[99] bg-white"},[a("div",{class:H(["flex h-8 items-center justify-center text-xs text-gray-500",[{"border border-gray-100 bg-gray-100":e.isWeekend&&!e.isToday},{"border border-white bg-white":!e.isWeekend&&!e.isToday},{"border-x border-orange-500 bg-gray-100":e.isToday}]])},O(e.label),3)]))),128))]),(r(!0),o(B,null,A(F.value,e=>(r(),o("tr",{key:e.id},[a("td",pt,[a("div",ht,[a("div",mt,[e.contactNumber?(r(),o("div",ft,[a("a",{class:"block",href:`tel:${e.contactNumber}`,title:e.contactNumber},[D(Be,{class:"h-5 w-5 fill-black"})],8,gt)])):b("",!0),e.profilePhotoSrc?(r(),o("img",{key:1,src:e.profilePhotoSrc,class:"h-full w-full rounded-full object-cover",alt:"Staff avatar."},null,8,vt)):(r(),M(Ae,{key:2,class:"h-6 w-6 fill-gray-300"}))]),a("div",kt,[a("p",{class:"truncate text-xs leading-none text-gray-600 md:text-sm",innerHTML:e.fullName},null,8,yt),a("div",_t,[a("div",St,[(r(!0),o(B,null,A(e.abilities,s=>(r(),o("img",{key:s.id,src:s.iconUrl,title:s.name,class:"cursor-help",alt:"Staff ability icon."},null,8,bt))),128))]),a("div",xt,[a("span",{class:"cursor-help text-center text-xs text-blue-500",title:"Allocated shift",innerHTML:e.schedule.filter(s=>{const i=t.tasks.filter(p=>s.task&&s.task.id===p.id)[0];return i?i.isPaid:!1}).length},null,8,wt),a("span",{class:"cursor-help text-center text-xs text-orange-500",title:"Holiday",innerHTML:e.schedule.filter(s=>{const i=t.tasks.filter(p=>s.task&&s.task.id===p.id)[0];return i?i.isHoliday:null}).length},null,8,Tt),a("span",{class:"cursor-help text-center text-xs text-green-500",title:"Sick",innerHTML:e.schedule.filter(s=>{const i=t.tasks.filter(p=>s.task&&s.task.id===p.id)[0];return i?i.isSick:null}).length},null,8,It),a("span",{class:"cursor-help text-center text-xs text-orange-500",title:"Training",innerHTML:e.schedule.filter(s=>{const i=t.tasks.filter(p=>s.task&&s.task.id===p.id)[0];return i?i.isTraining:null}).length},null,8,Dt)])])])])]),(r(!0),o(B,null,A(e.schedule,s=>{var i,p;return r(),o("td",{key:s.date},[a("div",Bt,[(i=s.task)!=null&&i.id?(r(),o("button",{key:0,class:H(["block h-full w-full py-2 hover:brightness-90",[{"border-x border-orange-500":s.isToday},{"cursor-not-allowed":!l.value&&!h(v(u).id,e.id,t.currentlySelectedTask)},t.tasks.find(w=>{var T;return w.id===((T=s.task)==null?void 0:T.id)})?(p=t.tasks.find(w=>{var T;return w.id===((T=s.task)==null?void 0:T.id)}))==null?void 0:p.class:"bg-gray-400"]]),onClick:w=>me(e,s,t.currentlySelectedTask)},[t.tasks.find(w=>{var T;return w.id===((T=s.task)==null?void 0:T.id)})&&s.task.iconUrl?(r(),o("img",{key:0,class:"absolute right-0 top-0",src:s.task.iconUrl,alt:"Task icon."},null,8,Ct)):b("",!0)],10,At)):(r(),o("button",{key:1,class:H(["block h-full w-full py-2 hover:bg-gray-100",[{"border-x border-orange-500":s.isToday},{"cursor-not-allowed":t.filterState.selectedDepartment&&!v(m)(v(R).EDIT_SCHEDULE,t.filterState.selectedDepartment)&&!h(v(u).id,e.id,t.currentlySelectedTask)}]]),onClick:w=>h(v(u).id,e.id,t.currentlySelectedTask)||l.value?z(s,t.currentlySelectedTask):null},null,10,Ht)),s.task&&s.holiday_request?(r(),o("div",Ot)):b("",!0)])])}),128))]))),128)),a("tr",null,[Lt,(r(!0),o(B,null,A(g.value.daysInMonth,e=>(r(),o("td",{key:e.date,class:"bg-white"},[a("div",{class:H(["flex h-8 items-center justify-center text-xs text-gray-500",[{"border border-gray-100 bg-gray-100":e.isWeekend&&!e.isToday},{"border border-white bg-white":!e.isWeekend&&!e.isToday},{"border-x border-orange-500 bg-gray-100":e.isToday}]])},O(e.label),3)]))),128))]),(r(!0),o(B,null,A(he.value,(e,s)=>{var i;return r(),o(B,{key:s},[e.value.length&&!(s===0&&((i=t.filterState.selectedOperationalBase)==null?void 0:i.id)!==0)?(r(),o("tr",Et,[a("td",Mt,[a("div",$t,[a("span",{textContent:O(e.label)},null,8,Nt)])]),(r(!0),o(B,null,A(e.value,(p,w)=>(r(),o("td",{key:w},[a("div",Ut,[a("span",{textContent:O(p)},null,8,Vt)])]))),128))])):b("",!0)],64)}),128))])])])])):b("",!0)}}),qt=q(le,[["__scopeId","data-v-fbe32c93"]]);le.__docgenInfo={exportName:"default",displayName:"Schedule",description:"",tags:{},props:[{name:"filterState",required:!0,type:{name:"IDataFilters"}},{name:"tasks",required:!0,type:{name:"Array",elements:[{name:"ITask"}]}},{name:"currentlySelectedTask",required:!0,type:{name:"union",elements:[{name:"ITask"},{name:"null"}]}}],sourceFiles:["D:/work/server/htdocs/aa-portal.is/src/shared/ui/schedule/Schedule.vue"]};const jt={class:"flex flex-col gap-3 pb-6 pt-4 lg:flex-row lg:items-center"},Rt=P({__name:"Index",setup(n){const k=be(),x=Y(),{apiGetTasksByDepartmentAndOperationalBase:I}=te(),m=C({selectedDepartment:null,selectedOperationalBase:null,selectedRole:null,selectedMonth:"",selectedDate:""});k.query.date||x.push({name:X.Dashboard});const u=C(null),f=C([]),S=c=>{m.value=c};return W(m,async(c,y)=>{const{selectedOperationalBase:l,selectedDepartment:h}=c,_=y.selectedOperationalBase!==l,g=y.selectedDepartment!==h;if(!l||!h){f.value=[];return}(_||g)&&(u.value=null,f.value=await I(h,l))}),(c,y)=>(r(),M(xe,{"main-content-title":"Schedule"},{default:U(()=>[a("header",jt,[D(we,{"department-permissions-required":[v(R).VIEW_SCHEDULE],"filter-by-date":!1,"filter-by-month":"","filter-by-departments":"","filter-by-operational-bases":"","show-all-operational-bases":"","filter-by-roles":"","show-all-roles":"",onFilterStateUpdated:S},null,8,["department-permissions-required"])]),D(ae,{"currently-selected-task":u.value,"onUpdate:currentlySelectedTask":y[0]||(y[0]=l=>u.value=l),tasks:f.value,"filter-state":m.value},null,8,["currently-selected-task","tasks","filter-state"]),m.value.selectedDepartment?(r(),M(qt,{key:0,"filter-state":m.value,tasks:f.value,"currently-selected-task":u.value},null,8,["filter-state","tasks","currently-selected-task"])):b("",!0)]),_:1}))}});Rt.__docgenInfo={exportName:"default",displayName:"schedule",description:"",tags:{},sourceFiles:["D:/work/server/htdocs/aa-portal.is/src/pages/schedule/Index.vue"]};export{Rt as default};
