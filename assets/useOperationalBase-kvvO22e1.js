import{d as v,s as b}from"./schemas-74JEr9Jm.js";import{u as O,a as A}from"./preview-D0Pi-YKn.js";import{j as I}from"./vue.esm-bundler-CYPfFjdk.js";const u=v("operationalBases",()=>{const s=I([]);function o(r){s.value=r}function p(r){s.value.push(r)}function n(r){const e=s.value.findIndex(c=>c.id===r);e!==-1&&s.value.splice(e,1)}function i(r){const e=s.value.findIndex(c=>c.id===r.id);s.value[e]=r}function d(){s.value=[]}return{storeOperationalBases:s,storeSetOperationalBases:o,storeAddOperationalBase:p,storeRemoveOperationalBase:n,storeUpdateOperationalBases:i,storeClearOperationalBases:d}});function S(){const{apiClient:s}=O();return{operationalBaseActions:{getAllOperationalBases:{id:"getAllOperationalBases",successMessage:"Operational bases retrieved successfully.",errorMessage:"Failed to retrieve operational bases."},getOperationalBasesByDepartments:{id:"getOperationalBasesByDepartments",successMessage:"Operational bases retrieved successfully.",errorMessage:"Failed to retrieve operational bases."},createOperationalBase:{id:"createOperationalBase",successMessage:"Operational base created successfully.",errorMessage:"Failed to create operational base."},getOperationalBaseById:{id:"getOperationalBaseById",successMessage:"Operational base retrieved successfully.",errorMessage:"Failed to retrieve operational base."},editOperationalBase:{id:"editOperationalBase",successMessage:"Operational base edited successfully.",errorMessage:"Failed to edit operational base."},getOpsBaseStatsData:{id:"getOpsBaseStatsData",successMessage:"Operational bases statistics retrieved successfully.",errorMessage:"Failed to retrieve operational bases statistics."},getPreviousOpsBaseStatsData:{id:"getPreviousOpsBaseStatsData",successMessage:"Operational bases statistics retrieved successfully.",errorMessage:"Failed to retrieve operational bases statistics."}},apiCreateOperationalBase:async n=>(await s.post("/api/operational-base",n)).data.operationalBase}}function E(){const{apiClient:s}=O(),{addToActionsInProgress:o,removeFromActionsInProgress:p,processActionError:n,resetActionsInError:i,processActionSuccess:d,resetActionsInSuccess:r}=A(),{operationalBaseActions:e,apiCreateOperationalBase:c}=S(),{storeClearOperationalBases:g,storeUpdateOperationalBases:y}=u(),{storeOperationalBases:m}=b(u()),B=async t=>await s.get("/api/operational-bases-by-department-id",{params:{selectedDepartmentId:t}});return{operationalBaseActions:e,fetchAndStoreOperationalBasesIndex:async t=>{i(),o(e.getAllOperationalBases);try{await B(t),p(e.getAllOperationalBases)}catch(a){console.log(a),n(e.getAllOperationalBases,a)}},storeClearOperationalBases:g,getAllOperationalBasesFromStore:()=>m.value,createOperationalBase:async t=>{i(),r(),o(e.createOperationalBase);try{const a=await c(t);return d(e.createOperationalBase),a}catch(a){console.log(a),n(e.createOperationalBase,a)}},getOperationalBaseById:async t=>{i(),o(e.getOperationalBaseById);try{const a=await s.get(`/api/operational-base/${t}`);return p(e.getOperationalBaseById),a.data.operationalBase}catch(a){n(e.getOperationalBaseById,a)}},apiGetOperationalBasesByDepartments:async t=>{i(),o(e.getOperationalBasesByDepartments);const a=t.map(f=>f.id),l=await s.post("/api/operational-bases/get-by-departments",{departmentIds:a});return p(e.getOperationalBasesByDepartments),l.data.operationalBases},editOperationalBase:async t=>{i(),r(),o(e.editOperationalBase);try{const a={name:t.name,department_id:t.department.id,latitude:t.latitude,longitude:t.longitude},l=await s.put(`/api/operational-base/${t.id}`,{operationalBase:a});return y(l.data.operationalBase),d(e.editOperationalBase),l.data.operationalBase}catch(a){n(e.editOperationalBase,a)}},apiGetOperationalBasesByDepartmentId:B,apiGetOpsBaseStatsData:async t=>{i();const a=t.requestingPreviousStats?e.getPreviousOpsBaseStatsData:e.getOpsBaseStatsData;o(a);try{const l=await s.get("/api/operational-bases/stats",{params:{dateRangeStart:t.dateRangeStart,dateRangeEnd:t.dateRangeEnd}});return p(a),l}catch(l){n(a,l)}}}}export{u as a,E as u};
