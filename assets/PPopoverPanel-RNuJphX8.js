import{e as D,g as w,q as ne,v as re,j as $,t as U,h as I,F as W,f as Y,p as se,o as J,A as Q,B as j,Z as L,_ as V,u as x,y as X,m as K,b as ue,l as ge,C as ye}from"./vue.esm-bundler-CYPfFjdk.js";import{b as Se}from"./index-LmGWO5sK.js";import{i as he,r as $e}from"./headlessui-float-sqR0azf2.js";import{a as k}from"./index-baqd9Qr3.js";import{A as we}from"./transition-qpXhaAaU.js";import{n as ie,N as _e,E as Ee,d as E}from"./use-root-containers-gEPBKDr2.js";import{t as A,o,A as ee,f as z,s as H,u as T,a as N,N as le}from"./keyboard-64MH3N5t.js";import{i as te,E as oe,t as Fe,d as q,a as Ie,b as ke,h as Ne,P as B,N as F,l as Be,T as Z}from"./open-closed-nhb_Ydho.js";import{s as Ce}from"./use-resolve-button-type-49aRxFpo.js";var Oe=(u=>(u[u.Open=0]="Open",u[u.Closed=1]="Closed",u))(Oe||{});let pe=Symbol("PopoverContext");function ae(u){let i=Y(pe,null);if(i===null){let m=new Error(`<${u} /> is missing a parent <${ve.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(m,ae),m}return i}let xe=Symbol("PopoverGroupContext");function de(){return Y(xe,null)}let ce=Symbol("PopoverPanelContext");function Te(){return Y(ce,null)}let ve=D({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(u,{slots:i,attrs:m,expose:y}){var t;let e=$(null);y({el:e,$el:e});let P=$(1),f=$(null),C=$(null),S=$(null),b=$(null),_=w(()=>te(e)),O=w(()=>{var a,n;if(!o(f)||!o(b))return!1;for(let G of document.querySelectorAll("body > *"))if(Number(G==null?void 0:G.contains(o(f)))^Number(G==null?void 0:G.contains(o(b))))return!0;let s=oe(),g=s.indexOf(o(f)),R=(g+s.length-1)%s.length,be=(g+1)%s.length,Pe=s[R],me=s[be];return!((a=o(b))!=null&&a.contains(Pe))&&!((n=o(b))!=null&&n.contains(me))}),v={popoverState:P,buttonId:$(null),panelId:$(null),panel:b,button:f,isPortalled:O,beforePanelSentinel:C,afterPanelSentinel:S,togglePopover(){P.value=T(P.value,{0:1,1:0})},closePopover(){P.value!==1&&(P.value=1)},close(a){v.closePopover();let n=a?a instanceof HTMLElement?a:a.value instanceof HTMLElement?o(a):o(v.button):o(v.button);n==null||n.focus()}};se(pe,v),Fe(w(()=>T(P.value,{0:q.Open,1:q.Closed})));let M={buttonId:v.buttonId,panelId:v.panelId,close(){v.closePopover()}},h=de(),p=h==null?void 0:h.registerPopover,[c,r]=we(),l=_e({mainTreeNodeRef:h==null?void 0:h.mainTreeNodeRef,portals:c,defaultContainers:[f,b]});function d(){var a,n,s,g;return(g=h==null?void 0:h.isFocusWithinPopoverGroup())!=null?g:((a=_.value)==null?void 0:a.activeElement)&&(((n=o(f))==null?void 0:n.contains(_.value.activeElement))||((s=o(b))==null?void 0:s.contains(_.value.activeElement)))}return U(()=>p==null?void 0:p(M)),Ee((t=_.value)==null?void 0:t.defaultView,"focus",a=>{var n,s;a.target!==window&&a.target instanceof HTMLElement&&P.value===0&&(d()||f&&b&&(l.contains(a.target)||(n=o(v.beforePanelSentinel))!=null&&n.contains(a.target)||(s=o(v.afterPanelSentinel))!=null&&s.contains(a.target)||v.closePopover()))},!0),Ie(l.resolveContainers,(a,n)=>{var s;v.closePopover(),ke(n,Ne.Loose)||(a.preventDefault(),(s=o(f))==null||s.focus())},w(()=>P.value===0)),()=>{let a={open:P.value===0,close:v.close};return I(W,[I(r,{},()=>ee({theirProps:{...u,...m},ourProps:{ref:e},slot:a,slots:i,attrs:m,name:"Popover"})),I(l.MainTreeNode)])}}}),Ue=D({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-popover-button-${A()}`}},inheritAttrs:!1,setup(u,{attrs:i,slots:m,expose:y}){let t=ae("PopoverButton"),e=w(()=>te(t.button));y({el:t.button,$el:t.button}),ne(()=>{t.buttonId.value=u.id}),re(()=>{t.buttonId.value=null});let P=de(),f=P==null?void 0:P.closeOthers,C=Te(),S=w(()=>C===null?!1:C.value===t.panelId.value),b=$(null),_=`headlessui-focus-sentinel-${A()}`;S.value||U(()=>{t.button.value=o(b)});let O=Ce(w(()=>({as:u.as,type:i.type})),b);function v(l){var d,a,n,s,g;if(S.value){if(t.popoverState.value===1)return;switch(l.key){case N.Space:case N.Enter:l.preventDefault(),(a=(d=l.target).click)==null||a.call(d),t.closePopover(),(n=o(t.button))==null||n.focus();break}}else switch(l.key){case N.Space:case N.Enter:l.preventDefault(),l.stopPropagation(),t.popoverState.value===1&&(f==null||f(t.buttonId.value)),t.togglePopover();break;case N.Escape:if(t.popoverState.value!==0)return f==null?void 0:f(t.buttonId.value);if(!o(t.button)||(s=e.value)!=null&&s.activeElement&&!((g=o(t.button))!=null&&g.contains(e.value.activeElement)))return;l.preventDefault(),l.stopPropagation(),t.closePopover();break}}function M(l){S.value||l.key===N.Space&&l.preventDefault()}function h(l){var d,a;u.disabled||(S.value?(t.closePopover(),(d=o(t.button))==null||d.focus()):(l.preventDefault(),l.stopPropagation(),t.popoverState.value===1&&(f==null||f(t.buttonId.value)),t.togglePopover(),(a=o(t.button))==null||a.focus()))}function p(l){l.preventDefault(),l.stopPropagation()}let c=ie();function r(){let l=o(t.panel);if(!l)return;function d(){T(c.value,{[E.Forwards]:()=>B(l,F.First),[E.Backwards]:()=>B(l,F.Last)})===Z.Error&&B(oe().filter(a=>a.dataset.headlessuiFocusGuard!=="true"),T(c.value,{[E.Forwards]:F.Next,[E.Backwards]:F.Previous}),{relativeTo:o(t.button)})}d()}return()=>{let l=t.popoverState.value===0,d={open:l},{id:a,...n}=u,s=S.value?{ref:b,type:O.value,onKeydown:v,onClick:h}:{ref:b,id:a,type:O.value,"aria-expanded":t.popoverState.value===0,"aria-controls":o(t.panel)?t.panelId.value:void 0,disabled:u.disabled?!0:void 0,onKeydown:v,onKeyup:M,onClick:h,onMousedown:p};return I(W,[ee({ourProps:s,theirProps:{...i,...n},slot:d,attrs:i,slots:m,name:"PopoverButton"}),l&&!S.value&&t.isPortalled.value&&I(z,{id:_,features:H.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:r})])}}}),De=D({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-popover-panel-${A()}`}},inheritAttrs:!1,setup(u,{attrs:i,slots:m,expose:y}){let{focus:t}=u,e=ae("PopoverPanel"),P=w(()=>te(e.panel)),f=`headlessui-focus-sentinel-before-${A()}`,C=`headlessui-focus-sentinel-after-${A()}`;y({el:e.panel,$el:e.panel}),ne(()=>{e.panelId.value=u.id}),re(()=>{e.panelId.value=null}),se(ce,e.panelId),U(()=>{var p,c;if(!t||e.popoverState.value!==0||!e.panel)return;let r=(p=P.value)==null?void 0:p.activeElement;(c=o(e.panel))!=null&&c.contains(r)||B(o(e.panel),F.First)});let S=Be(),b=w(()=>S!==null?(S.value&q.Open)===q.Open:e.popoverState.value===0);function _(p){var c,r;switch(p.key){case N.Escape:if(e.popoverState.value!==0||!o(e.panel)||P.value&&!((c=o(e.panel))!=null&&c.contains(P.value.activeElement)))return;p.preventDefault(),p.stopPropagation(),e.closePopover(),(r=o(e.button))==null||r.focus();break}}function O(p){var c,r,l,d,a;let n=p.relatedTarget;n&&o(e.panel)&&((c=o(e.panel))!=null&&c.contains(n)||(e.closePopover(),((l=(r=o(e.beforePanelSentinel))==null?void 0:r.contains)!=null&&l.call(r,n)||(a=(d=o(e.afterPanelSentinel))==null?void 0:d.contains)!=null&&a.call(d,n))&&n.focus({preventScroll:!0})))}let v=ie();function M(){let p=o(e.panel);if(!p)return;function c(){T(v.value,{[E.Forwards]:()=>{var r;B(p,F.First)===Z.Error&&((r=o(e.afterPanelSentinel))==null||r.focus())},[E.Backwards]:()=>{var r;(r=o(e.button))==null||r.focus({preventScroll:!0})}})}c()}function h(){let p=o(e.panel);if(!p)return;function c(){T(v.value,{[E.Forwards]:()=>{let r=o(e.button),l=o(e.panel);if(!r)return;let d=oe(),a=d.indexOf(r),n=d.slice(0,a+1),s=[...d.slice(a+1),...n];for(let g of s.slice())if(g.dataset.headlessuiFocusGuard==="true"||l!=null&&l.contains(g)){let R=s.indexOf(g);R!==-1&&s.splice(R,1)}B(s,F.First,{sorted:!1})},[E.Backwards]:()=>{var r;B(p,F.Previous)===Z.Error&&((r=o(e.button))==null||r.focus())}})}c()}return()=>{let p={open:e.popoverState.value===0,close:e.close},{id:c,focus:r,...l}=u,d={ref:e.panel,id:c,onKeydown:_,onFocusout:t&&e.popoverState.value===0?O:void 0,tabIndex:-1};return ee({ourProps:d,theirProps:{...i,...l},attrs:i,slot:p,slots:{...m,default:(...a)=>{var n;return[I(W,[b.value&&e.isPortalled.value&&I(z,{id:f,ref:e.beforePanelSentinel,features:H.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:M}),(n=m.default)==null?void 0:n.call(m,...a),b.value&&e.isPortalled.value&&I(z,{id:C,ref:e.afterPanelSentinel,features:H.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:h})])]}},features:le.RenderStrategy|le.Static,visible:b.value,name:"PopoverPanel"})}}});const fe=D({__name:"PPopoverRoot",setup(u){return(i,m)=>(J(),Q(x(ve),L(V(i.$props)),{default:j(y=>[X(i.$slots,"default",L(V(y)))]),_:3},16))}});fe.__docgenInfo={exportName:"default",displayName:"PPopoverRoot",description:"",tags:{},slots:[{name:"default",scoped:!0,bindings:[]}],sourceFiles:["D:/work/server/htdocs/aa-portal.is/src/shared/ui/PPopover/PPopoverRoot.vue"]};const Me=he({enter:k("transition duration-200 ease-out"),enterFrom:k("scale-90 opacity-0"),enterTo:k("scale-100 opacity-100"),leave:k("transition duration-150 ease-in"),leaveFrom:k("scale-100 opacity-100"),leaveTo:k("scale-90 opacity-0"),tailwindcssOriginClass:!0,flip:!0}),Ae=D({__name:"PPopover",props:{float:{}},setup(u){return(i,m)=>(J(),Q(fe,K(x(Se)(i.$props,"float"),{class:"flex"}),{default:j(y=>[ue(x(Me),K({placement:"bottom",offset:16,arrow:16},i.float),{default:j(()=>[X(i.$slots,"default",L(V(y)))]),_:2},1040)]),_:3},16))}});Ae.__docgenInfo={exportName:"default",displayName:"PPopover",description:"",tags:{},props:[{name:"float",required:!1,type:{name:"FloatProps"}}],slots:[{name:"default",scoped:!0,bindings:[]},{name:"button"}],sourceFiles:["D:/work/server/htdocs/aa-portal.is/src/shared/ui/PPopover/PPopover.vue"]};const je=D({__name:"PPopoverPanel",props:{class:{}},setup(u){return(i,m)=>(J(),Q(x(De),K(i.$props,{class:x(k)("rounded border border-gray-300 bg-white p-4",i.$props.class)}),{default:j(y=>[ue(x($e),{class:"absolute",offset:8,as:"template"},{default:j(({placement:t})=>[ge("div",{class:ye(["size-4 rotate-45 border border-gray-300 bg-white",[t.includes("bottom")&&"border-b-0 border-r-0",t.includes("top")&&"border-l-0 border-t-0",t.includes("left")&&"border-b-0 border-l-0",t.includes("right")&&"border-r-0 border-t-0"]])},null,2)]),_:1}),X(i.$slots,"default",L(V(y)))]),_:3},16,["class"]))}});je.__docgenInfo={exportName:"default",displayName:"PPopoverPanel",description:"",tags:{},props:[{name:"class",required:!1,type:{name:"ClassValue"}}],slots:[{name:"default",scoped:!0,bindings:[]}],sourceFiles:["D:/work/server/htdocs/aa-portal.is/src/shared/ui/PPopover/PPopoverPanel.vue"]};export{Ue as G,Ae as _,je as a,De as j};
