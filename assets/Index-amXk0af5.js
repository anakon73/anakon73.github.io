import{e as E,R as C,Q as U,o as r,k as a,l as t,G as _,C as y,j as $,v as j,w as R,A as S,B as f,E as B,u as e,b as l,x as h,D as p,F as A,H as N}from"./vue.esm-bundler-CYPfFjdk.js";import{s as I,u as P}from"./schemas-74JEr9Jm.js";import{e as z,a as G,f as D,M as L,A as n}from"./preview-D0Pi-YKn.js";import{I as W}from"./IconAccount-3MIbJHaP.js";import{P as q}from"./ProgressSpinner-lCLkagxy.js";import{I as H}from"./IconPhone-VcVxsafe.js";import{u as O}from"./useAuth-8d_1_S6I.js";import{_ as Q}from"./VDataFilters-2mcnRfw0.js";import"./index-LmGWO5sK.js";import"./vue-router-E7v71uM3.js";import"./routes-WhYxSpGG.js";import"./models-qWR1FMGP.js";import"./chunk-UXHY756F-iEg6Hh0Y.js";import"./index-C1vJkiWb.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./preview-errors-7FWlPnjy.js";import"./index-PPLHz8o0.js";import"./PDays-npMhi6Nw.js";import"./index-baqd9Qr3.js";import"./index-TCXC35p5.js";import"./index-05uTbNHo.js";import"./PPopoverPanel-RNuJphX8.js";import"./headlessui-float-sqR0azf2.js";import"./transition-qpXhaAaU.js";import"./keyboard-64MH3N5t.js";import"./open-closed-nhb_Ydho.js";import"./use-root-containers-gEPBKDr2.js";import"./use-resolve-button-type-49aRxFpo.js";import"./iframe-ufxlS10p.js";import"../sb-preview/runtime.js";import"./query-G1AwWss6.js";import"./ChevronDownIcon-AgxEjrtE.js";import"./listbox-3RN1mHPV.js";import"./form-TGXPuq_M.js";import"./DepartureList-w5NrqMJ9.js";import"./DepartureAssignStaffAndVehicles-8AoBdfT8.js";import"./api-B2HcjM2j.js";import"./api-cJzoLyfI.js";import"./PButton-h9_xezBg.js";import"./index-VqpYtbVe.js";import"./PInput-iZb_REtl.js";import"./POverlay-3jPNvx4x.js";import"./PSpinner-cF72MsvC.js";import"./IconBus-0QPjtZ9u.js";import"./_plugin-vue_export-helper-x3n3nnut.js";import"./IconPerson-i3ljUCnk.js";import"./SuggestedUser-4kWsZiWj.js";import"./PAvatar-wq6oK0Zr.js";import"./PlusCircleIcon-aSiXn_Mr.js";import"./SuggestedVehicle-r1TyKt-D.js";import"./ScheduledUser-esbe3tjU.js";import"./VehicleTitle-0pOySBND.js";import"./XMarkIcon-_tXc_TyD.js";import"./PPhoneLink-wKLYRG_F.js";import"./PAlert-quHLeqTA.js";import"./CheckCircleIcon-akbq8cGf.js";import"./XMarkIcon-t43a1P5Z.js";import"./PDialogTitle-rfxNVwSR.js";import"./description-LPuBJoU_.js";import"./DepartureListItem-I88AIHqM.js";import"./DepartureUpdateComment-2rt04tFb.js";import"./PTextarea-Wrr33MR5.js";import"./DepartureUpdateCommentPopover-euFlcGix.js";import"./DepartureUpdateStatus-zdhd3wV8.js";import"./PListboxLabel-U39qo3cm.js";import"./CheckIcon-WRJIoum8.js";import"./lib-Fy6oBlQ3.js";import"./PToggle-mLVcOzrp.js";import"./PRadio-sGATo2dT.js";import"./index-bhXQ3okY.js";import"./isNativeReflectConstruct-ubdnbphT.js";import"./mock-vjhcKIQW.js";import"./index-1aVAeLWL.js";import"./mock-UR5nntqf.js";import"./mock-CzN7Q16W.js";import"./mock-YoOI-P8k.js";import"./mock-psFphV_9.js";import"./mock-OgPWcINV.js";import"./useDepartment-RZahlhen.js";import"./useOperationalBase-kvvO22e1.js";import"./useRole-JNprELZd.js";const J={class:"flex items-center"},K=["textContent"],X=t("svg",{class:"h-3 w-3 text-gray-400",fill:"none",viewBox:"0 0 12 12"},[t("path",{d:"M4 8l2-2m0 0l2-2M6 6L4 4m2 2l2 2",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Y=[X],Z=t("svg",{class:"h-3 w-3 text-blue-600",fill:"currentColor",viewBox:"0 0 12 12"},[t("path",{d:"M3.707 5.293a1 1 0 00-1.414 1.414l1.414-1.414zM5 8l-.707.707a1 1 0 001.414 0L5 8zm4.707-3.293a1 1 0 00-1.414-1.414l1.414 1.414zm-7.414 2l2 2 1.414-1.414-2-2-1.414 1.414zm3.414 2l4-4-1.414-1.414-4 4 1.414 1.414z"})],-1),ee=[Z],F=E({__name:"VToggleFilter",props:C({label:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(w){const i=U(w,"modelValue");return(b,x)=>(r(),a("div",J,[t("span",{class:"mr-3 text-sm font-medium leading-6 text-gray-900",textContent:_(b.label)},null,8,K),t("button",{class:y(["relative inline-flex h-6 w-11 shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-300 focus:ring-offset-2",[i.value?"bg-blue-600":"bg-gray-200"]]),onClick:x[0]||(x[0]=v=>i.value=!i.value)},[t("span",{class:y(["pointer-events-none relative inline-block h-5 w-5 rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",[i.value?"translate-x-5":"translate-x-0"]])},[t("span",{class:y(["absolute inset-0 flex h-full w-full items-center justify-center transition-opacity",[i.value?"opacity-0 duration-100 ease-out":"opacity-100 duration-200 ease-in"]])},Y,2),t("span",{class:y(["absolute inset-0 flex h-full w-full items-center justify-center transition-opacity",[i.value?"opacity-100 duration-200 ease-in":"opacity-0 duration-100 ease-out"]])},ee,2)],2)],2)]))}});F.__docgenInfo={exportName:"default",displayName:"VToggleFilter",description:"",tags:{},props:[{name:"label",required:!0,type:{name:"string"}}],sourceFiles:["D:/work/server/htdocs/aa-portal.is/src/shared/ui/inputs/VToggleFilter.vue"]};const te={key:0,class:"flex w-full justify-end py-6"},se={key:1,class:"flex w-full justify-end"},oe={class:"flex flex-col pb-4"},re={class:"flow-root md:mt-8"},ae={class:"overflow-x-auto scrollbar-thin scrollbar-track-gray-100 scrollbar-thumb-blue-500/25"},ie={class:"inline-block min-w-full py-2 align-middle"},le={key:0,class:"flex h-[50px] items-center justify-center rounded border border-gray-100 bg-gray-50 shadow"},ne={key:1,class:"min-w-full divide-y divide-gray-300 rounded border border-gray-100 bg-white shadow"},ce={key:0,scope:"col",colspan:"3",class:"bg-gray-50 px-3 py-3.5"},me=t("th",{scope:"col",class:"bg-gray-50 px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Name ",-1),pe=t("th",{scope:"col",class:"bg-gray-50 px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Email ",-1),de=t("th",{scope:"col",class:"bg-gray-50 px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Operational Bases ",-1),ue=t("th",{scope:"col",class:"bg-gray-50 px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Roles ",-1),fe=t("th",{scope:"col",class:"bg-gray-50 px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Abilities ",-1),he={class:"divide-y divide-gray-200"},_e={key:0},xe=t("td",{colspan:"8",class:"px-3 py-3.5 text-center text-sm text-gray-500"}," No users found. ",-1),ge=[xe],ye={key:0,class:"relative whitespace-nowrap p-3 text-right text-sm font-medium"},be={key:1,class:"relative whitespace-nowrap p-3 text-right text-sm font-medium"},ve={key:2,class:"relative whitespace-nowrap p-3 text-right text-sm font-medium"},we={class:"flex items-center whitespace-nowrap p-3 text-sm font-medium text-gray-900"},ke={class:"relative mr-3 flex h-8 w-8 items-center justify-center rounded-full bg-gray-200"},Se={key:0,class:"absolute bottom-[-2px] left-[-5px] flex h-5 w-4 items-center justify-center rounded bg-white shadow"},Ae=["href","title"],Ne=["src"],Ie={class:"whitespace-nowrap p-3 text-sm text-gray-500"},De={class:"whitespace-nowrap p-3 text-sm text-gray-500"},Ee={class:"whitespace-nowrap p-3 text-sm text-gray-500"},Fe={class:"whitespace-nowrap p-3 text-sm text-gray-500"},Ve={class:"flex items-center space-x-0.5"},Me=["src","title"],Te=E({__name:"Index",setup(w){const{fetchAndStoreUsersIndex:i,storeResetUsers:b,userActions:x}=z(),{storeUsers:v}=I(P()),{actionIsInProgress:V}=G(),u=$(!1),{storeSetFilterState:M}=D(),{storeFilterState:s}=I(D()),{userHasPermissionInDepartment:c}=O(),T=async d=>{M(d),s.value.selectedDepartment!==null&&await i(s.value.selectedDepartment.id,u.value)};return j(()=>{b()}),R(u,async()=>{s.value.selectedDepartment!==null&&await i(s.value.selectedDepartment.id,u.value)}),(d,k)=>{const g=B("RouterLink");return r(),S(L,{"main-content-title":"Manage Staff"},{default:f(()=>[e(s).selectedDepartment&&e(c)(e(n).MANAGE_STAFF,e(s).selectedDepartment)?(r(),a("div",te,[l(g,{to:{name:d.$Routes.StaffCreate},class:"block w-full whitespace-nowrap rounded-md bg-blue-600 px-3 py-1.5 text-center text-sm font-semibold leading-6 text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600 hover:bg-blue-500 md:w-48"},{default:f(()=>[h(" Add User ")]),_:1},8,["to"])])):p("",!0),e(s).selectedDepartment&&e(c)(e(n).MANAGE_STAFF,e(s).selectedDepartment)?(r(),a("div",se,[l(F,{modelValue:u.value,"onUpdate:modelValue":k[0]||(k[0]=o=>u.value=o),label:"Include inactive staff and guest users."},null,8,["modelValue"])])):p("",!0),l(Q,{"department-permissions-required":[e(n).VIEW_STAFF_MANAGEMENT],"filter-by-departments":"",onFilterStateUpdated:T},null,8,["department-permissions-required"]),t("div",oe,[t("div",re,[t("div",ae,[t("div",ie,[e(s).selectedDepartment===null||e(V)(e(x).getAllUsers)?(r(),a("div",le,[l(q,{class:"h-5 w-5 text-blue-600"})])):(r(),a("table",ne,[t("thead",null,[t("tr",null,[e(s).selectedDepartment&&(e(c)(e(n).VIEW_ASSESSMENTS,e(s).selectedDepartment)||e(c)(e(n).VIEW_TRAINING,e(s).selectedDepartment))?(r(),a("th",ce)):p("",!0),me,pe,de,ue,fe])]),t("tbody",he,[e(v).length===0?(r(),a("tr",_e,ge)):(r(!0),a(A,{key:1},N(e(v),o=>(r(),a("tr",{key:o.id},[e(s).selectedDepartment&&e(c)(e(n).VIEW_ASSESSMENTS,e(s).selectedDepartment)?(r(),a("td",ye,[l(g,{to:{name:d.$Routes.StaffAssess,params:{userId:o.id}},class:"text-blue-600 hover:text-blue-900"},{default:f(()=>[h(" Assessment ")]),_:2},1032,["to"])])):p("",!0),e(s).selectedDepartment&&e(c)(e(n).VIEW_TRAINING,e(s).selectedDepartment)?(r(),a("td",be,[l(g,{to:{name:d.$Routes.StaffTrain,params:{userId:o.id}},class:"text-blue-600 hover:text-blue-900"},{default:f(()=>[h(" Training ")]),_:2},1032,["to"])])):p("",!0),e(s).selectedDepartment&&e(c)(e(n).MANAGE_STAFF,e(s).selectedDepartment)?(r(),a("td",ve,[l(g,{to:{name:d.$Routes.StaffEdit,params:{userId:o.id}},class:"text-blue-600 hover:text-blue-900"},{default:f(()=>[h(" Edit ")]),_:2},1032,["to"])])):p("",!0),t("td",we,[t("div",ke,[o.contactNumber?(r(),a("div",Se,[t("a",{class:"block",href:`tel:${o.contactNumber}`,title:o.contactNumber},[l(H,{class:"h-5 w-5 fill-black"})],8,Ae)])):p("",!0),o.profilePhotoSrc?(r(),a("img",{key:1,src:o.profilePhotoSrc,class:"h-8 w-8 rounded-full object-cover",loading:"lazy",alt:"Profile photo."},null,8,Ne)):(r(),S(W,{key:2,class:"h-5 w-5 fill-gray-400"}))]),h(" "+_(o.fullName),1)]),t("td",Ie,_(o.email),1),t("td",De,_(o.operationalBases.length>0?o.operationalBases.map(m=>m.name).join(", "):"N/A"),1),t("td",Ee,_(o.roles.length>0?o.roles.map(m=>m.name).join(", "):"N/A"),1),t("td",Fe,[t("div",Ve,[(r(!0),a(A,null,N(o.abilities,m=>(r(),a("div",{key:m.id,class:"flex h-5 w-5 items-center justify-center"},[t("img",{src:m.iconUrl,title:m.name,class:"cursor-help",alt:"Icon image."},null,8,Me)]))),128))])])]))),128))])]))])])])])]),_:1})}}});Te.__docgenInfo={exportName:"default",displayName:"staff",description:"",tags:{},sourceFiles:["D:/work/server/htdocs/aa-portal.is/src/pages/staff/Index.vue"]};export{Te as default};
