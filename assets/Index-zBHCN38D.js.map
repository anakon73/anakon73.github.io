{"version":3,"file":"Index-zBHCN38D.js","sources":["../../src/pages/operational-bases/Index.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { storeToRefs } from 'pinia'\nimport MainContent from '@/shared/ui/layout/MainContent.vue'\nimport { useUi } from '@/shared/lib/composables/useUi'\nimport ProgressSpinner from '@/shared/ui/ProgressSpinner.vue'\nimport { useOperationalBase } from '@/shared/api/operational-bases/useOperationalBase'\nimport VDataFilters from '@/shared/ui/inputs/VDataFilters.vue'\nimport type { IDataFilters } from '@/shared/types/inputs/IDataFilters'\nimport { useUiStore } from '@/shared/lib/composables/ui'\nimport { useOperationalBasesStore } from '@/shared/api/stores/operationalBase'\nimport { AppPermissions } from '@/shared/types/enums/permissions/permissions'\nimport { useAuth } from '@/shared/api/useAuth'\n\nconst {\n  operationalBaseActions,\n  apiGetOperationalBasesByDepartments,\n} = useOperationalBase()\nconst { actionIsInProgress } = useUi()\n\nconst { storeSetFilterState } = useUiStore()\nconst { storeFilterState } = storeToRefs(useUiStore())\n\nconst { storeSetOperationalBases } = useOperationalBasesStore()\nconst { storeOperationalBases } = storeToRefs(useOperationalBasesStore())\n\nconst { userHasPermissionInDepartment } = useAuth()\n\nconst handleFilterStateUpdate = async (newFilterState: IDataFilters) => {\n  storeSetFilterState(newFilterState)\n\n  if (storeFilterState.value.selectedDepartment === null) {\n    return\n  }\n\n  const operationalBases = await apiGetOperationalBasesByDepartments([\n    storeFilterState.value.selectedDepartment,\n  ])\n\n  storeSetOperationalBases(operationalBases)\n}\n</script>\n\n<template>\n  <MainContent main-content-title=\"Manage Operational Bases\">\n    <div\n      v-if=\"storeFilterState.selectedDepartment && userHasPermissionInDepartment(\n        AppPermissions.MANAGE_OPERATIONAL_BASES,\n        storeFilterState.selectedDepartment,\n      )\"\n      class=\"mt-6 flex w-full justify-end\"\n    >\n      <RouterLink\n        :to=\"{ name: $Routes.OperationalBaseCreate }\"\n        class=\"block w-48 rounded-md bg-blue-600 px-3 py-1.5 text-center text-sm font-semibold leading-6 text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600 hover:bg-blue-500\"\n      >\n        Add Operational Base\n      </RouterLink>\n    </div>\n\n    <VDataFilters\n      :department-permissions-required=\"[\n        AppPermissions.VIEW_OPERATIONAL_BASES,\n      ]\"\n      filter-by-departments\n      :filter-state=\"storeFilterState\"\n      @filter-state-updated=\"handleFilterStateUpdate\"\n    />\n\n    <div class=\"flex flex-col pb-4\">\n      <div class=\"mt-8 flow-root\">\n        <div class=\"overflow-x-auto\">\n          <div class=\"inline-block min-w-full py-2 align-middle\">\n            <div\n              v-if=\"storeFilterState.selectedDepartment === null || actionIsInProgress(operationalBaseActions.getOperationalBasesByDepartments)\"\n              class=\"flex h-[50px] items-center justify-center rounded border border-gray-100 bg-gray-50 shadow\"\n            >\n              <ProgressSpinner class=\"h-5 w-5 text-blue-600\" />\n            </div>\n\n            <table\n              v-else\n              class=\"min-w-full divide-y divide-gray-300 rounded border border-gray-100 bg-white shadow\"\n            >\n              <thead>\n                <tr>\n                  <th scope=\"col\" class=\"bg-gray-50 px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">\n                    Operational Bases\n                  </th>\n                  <th scope=\"col\" colspan=\"2\" class=\"bg-gray-50 px-3 py-3.5\" />\n                </tr>\n              </thead>\n              <tbody class=\"divide-y divide-gray-200\">\n                <template v-if=\"storeOperationalBases.length === 0\">\n                  <tr>\n                    <td colspan=\"8\" class=\"px-3 py-3.5 text-center text-sm text-gray-500\">\n                      No operational bases found.\n                    </td>\n                  </tr>\n                </template>\n\n                <template v-else>\n                  <tr\n                    v-for=\"operationalBase in storeOperationalBases\"\n                    :key=\"operationalBase.id\"\n                  >\n                    <td class=\"flex items-center whitespace-nowrap p-3 text-sm font-medium text-gray-900\">\n                      {{ operationalBase.name }}\n                    </td>\n                    <td class=\"relative whitespace-nowrap p-3 text-right text-sm font-medium\">\n                      <RouterLink\n                        v-if=\"storeFilterState.selectedDepartment && userHasPermissionInDepartment(\n                          AppPermissions.MANAGE_OPERATIONAL_BASES,\n                          storeFilterState.selectedDepartment,\n                        )\"\n                        :to=\"{\n                          name: $Routes.OperationalBaseEdit,\n                          params: { operationalBaseId: operationalBase.id },\n                        }\"\n                        class=\"text-blue-600 hover:text-blue-900\"\n                      >\n                        View\n                      </RouterLink>\n                    </td>\n                  </tr>\n                </template>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  </MainContent>\n</template>\n"],"names":["operationalBaseActions","apiGetOperationalBasesByDepartments","useOperationalBase","actionIsInProgress","useUi","storeSetFilterState","useUiStore","storeFilterState","storeToRefs","storeSetOperationalBases","useOperationalBasesStore","storeOperationalBases","userHasPermissionInDepartment","useAuth","handleFilterStateUpdate","newFilterState","operationalBases"],"mappings":"0uHAaM,KAAA,CACJ,uBAAAA,EACA,oCAAAC,GACEC,EAAmB,EACjB,CAAE,mBAAAC,GAAuBC,IAEzB,CAAE,oBAAAC,GAAwBC,IAC1B,CAAE,iBAAAC,CAAqB,EAAAC,EAAYF,EAAY,CAAA,EAE/C,CAAE,yBAAAG,GAA6BC,IAC/B,CAAE,sBAAAC,CAA0B,EAAAH,EAAYE,EAA0B,CAAA,EAElE,CAAE,8BAAAE,GAAkCC,IAEpCC,EAA0B,MAAOC,GAAiC,CAGlE,GAFJV,EAAoBU,CAAc,EAE9BR,EAAiB,MAAM,qBAAuB,KAChD,OAGI,MAAAS,EAAmB,MAAMf,EAAoC,CACjEM,EAAiB,MAAM,kBAAA,CACxB,EAEDE,EAAyBO,CAAgB,CAAA"}