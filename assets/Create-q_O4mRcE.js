import{e as T,j as g,w as N,o as r,A as c,B as _,E as R,l as e,u as i,b as p,k as d,J as l,P as m,S as y,F as h,H as V,G as B,C as k,D as x,T as D,N as H}from"./vue.esm-bundler-CYPfFjdk.js";import{R as j}from"./RightDrawer-Lpr6admO.js";import{a as G,A as $}from"./preview-D0Pi-YKn.js";import{I as W}from"./IconClose-tbzieUCA.js";import{P as w}from"./ProgressSpinner-lCLkagxy.js";import{u as Y,a as z}from"./useExperience-j1XTukVo.js";import{u as J}from"./useExperienceLocation-WT3dP7yS.js";import{_ as X}from"./VDataFilters-2mcnRfw0.js";import{_ as K,a as Q}from"./ActionErrorAlert--bGVRXV4.js";import{p as Z}from"./schemas-74JEr9Jm.js";import{i as ee}from"./PToggle-mLVcOzrp.js";import"./_plugin-vue_export-helper-x3n3nnut.js";import"./chunk-UXHY756F-iEg6Hh0Y.js";import"./index-C1vJkiWb.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./vue-router-E7v71uM3.js";import"./preview-errors-7FWlPnjy.js";import"./index-PPLHz8o0.js";import"./PDays-npMhi6Nw.js";import"./index-baqd9Qr3.js";import"./index-TCXC35p5.js";import"./index-05uTbNHo.js";import"./PPopoverPanel-RNuJphX8.js";import"./index-LmGWO5sK.js";import"./headlessui-float-sqR0azf2.js";import"./transition-qpXhaAaU.js";import"./keyboard-64MH3N5t.js";import"./open-closed-nhb_Ydho.js";import"./use-root-containers-gEPBKDr2.js";import"./use-resolve-button-type-49aRxFpo.js";import"./iframe-ufxlS10p.js";import"../sb-preview/runtime.js";import"./query-G1AwWss6.js";import"./ChevronDownIcon-AgxEjrtE.js";import"./listbox-3RN1mHPV.js";import"./form-TGXPuq_M.js";import"./DepartureList-w5NrqMJ9.js";import"./DepartureAssignStaffAndVehicles-8AoBdfT8.js";import"./api-B2HcjM2j.js";import"./api-cJzoLyfI.js";import"./PButton-h9_xezBg.js";import"./index-VqpYtbVe.js";import"./PInput-iZb_REtl.js";import"./POverlay-3jPNvx4x.js";import"./PSpinner-cF72MsvC.js";import"./IconBus-0QPjtZ9u.js";import"./IconPerson-i3ljUCnk.js";import"./SuggestedUser-4kWsZiWj.js";import"./PAvatar-wq6oK0Zr.js";import"./PlusCircleIcon-aSiXn_Mr.js";import"./SuggestedVehicle-r1TyKt-D.js";import"./ScheduledUser-esbe3tjU.js";import"./VehicleTitle-0pOySBND.js";import"./XMarkIcon-_tXc_TyD.js";import"./PPhoneLink-wKLYRG_F.js";import"./PAlert-quHLeqTA.js";import"./CheckCircleIcon-akbq8cGf.js";import"./XMarkIcon-t43a1P5Z.js";import"./PDialogTitle-rfxNVwSR.js";import"./description-LPuBJoU_.js";import"./DepartureListItem-I88AIHqM.js";import"./DepartureUpdateComment-2rt04tFb.js";import"./PTextarea-Wrr33MR5.js";import"./DepartureUpdateCommentPopover-euFlcGix.js";import"./DepartureUpdateStatus-zdhd3wV8.js";import"./models-qWR1FMGP.js";import"./PListboxLabel-U39qo3cm.js";import"./CheckIcon-WRJIoum8.js";import"./lib-Fy6oBlQ3.js";import"./routes-WhYxSpGG.js";import"./PRadio-sGATo2dT.js";import"./index-bhXQ3okY.js";import"./isNativeReflectConstruct-ubdnbphT.js";import"./mock-vjhcKIQW.js";import"./index-1aVAeLWL.js";import"./mock-UR5nntqf.js";import"./mock-CzN7Q16W.js";import"./mock-YoOI-P8k.js";import"./mock-psFphV_9.js";import"./mock-OgPWcINV.js";import"./useDepartment-RZahlhen.js";import"./useOperationalBase-kvvO22e1.js";import"./useRole-JNprELZd.js";import"./useAuth-8d_1_S6I.js";import"./IconTickMarkCircle-2_sKm8Jk.js";var C=(f=>(f.EASY="Easy",f.MEDIUM="Medium",f.HARD="Hard",f))(C||{});const te={class:"isolate flex flex-col items-center justify-center border-l bg-white pb-6"},oe={class:"sticky top-0 z-[9999999] flex w-full items-center justify-end bg-white p-6"},se=e("div",{class:"mb-6"},[e("h3",{class:"text-base font-semibold leading-6 text-gray-900"}," Create Experience. "),e("p",{class:"mt-1 text-sm text-gray-500"}," Use the form below to create a new Experience. ")],-1),ie={class:"grid grid-cols-1 gap-x-4 gap-y-6 pt-6"},re=e("p",{class:"mb-1 block text-sm font-medium text-gray-700"}," Department ",-1),le=e("label",{for:"experience_title",class:"block text-sm font-medium text-gray-700"}," Title ",-1),ae={class:"mt-1"},ne=e("label",{for:"experience_description",class:"block text-sm font-medium text-gray-700"}," Description ",-1),de={class:"mt-1"},me={class:"grid grid-cols-1 gap-x-2 gap-y-6 sm:grid-cols-2"},ue=e("label",{for:"bokun_id",class:"block text-sm font-medium text-gray-700"}," Bókun ID ",-1),ce={class:"mt-1"},pe=e("label",{for:"bokun_product_code",class:"block text-sm font-medium text-gray-700"}," Bókun Product Code ",-1),fe={class:"mt-1"},be=e("label",{for:"customised_start_time",class:"block text-sm font-medium text-gray-700"}," Customised Start Time? ",-1),_e={class:"mt-1"},xe=e("option",{value:!0}," Yes ",-1),ve=e("option",{value:!1}," No ",-1),ge=[xe,ve],ye=e("label",{for:"min_age",class:"block text-sm font-medium text-gray-700"}," Minimum Age ",-1),he={class:"mt-1"},ke=e("label",{for:"difficulty",class:"block text-sm font-medium text-gray-700"}," Difficulty ",-1),we={class:"mt-1"},Ee=e("label",{for:"distance_hiked_in_meters",class:"block text-sm font-medium text-gray-700"}," Distance Hiked (m) ",-1),Ie={class:"mt-1"},Ve=e("label",{for:"distance_driven_in_meters",class:"block text-sm font-medium text-gray-700"}," Distance Driven (m) ",-1),Be={class:"mt-1"},De=e("label",{for:"experience_location_id",class:"block text-sm font-medium text-gray-700"}," Experience Location ",-1),Ce={class:"relative mt-1"},Se=["disabled"],Ae=["value"],Me={key:0,class:"absolute inset-0 flex items-center justify-center"},Ue=e("label",{for:"duration_in_minutes",class:"block text-sm font-medium text-gray-700"}," Duration (minutes) ",-1),Le={class:"mt-1"},Oe=e("label",{for:"allow_vehicles",class:"block text-sm font-medium text-gray-700"}," Allow Vehicles ",-1),qe={class:"mt-1"},Pe={key:0,class:"relative pt-5"},Fe={class:"flex items-center justify-end"},Te={class:"flex items-center"},Ne={key:0},Re=T({__name:"Create",setup(f){const{validateForm:S,actionIsInProgress:v,actionIsInError:A,actionIsInSuccess:M}=G(),{experienceActions:u,createExperience:U}=Y(),{storeAddExperience:L}=z(),{fetchAndStoreExperienceLocationsByOperationalBaseIdIndex:O,getAllExperienceLocationsFromStore:b,experienceLocationActions:E}=J(),I=g(null),a=g({selectedDepartment:null,selectedOperationalBase:null,selectedRole:null,selectedMonth:"",selectedDate:""}),t=g(null),q=async()=>{await S(I.value,async()=>{if(!t.value)return;const n=await U(t.value);n&&a.value.selectedOperationalBase&&n.operationalBase.id===a.value.selectedOperationalBase.id&&L(n)})},P=async n=>{a.value=n};return N(()=>a.value.selectedOperationalBase,async(n,s)=>{n!==s&&a.value.selectedDepartment&&a.value.selectedOperationalBase&&(await O(a.value.selectedOperationalBase.id),b().length>0&&(t.value={department:a.value.selectedDepartment,operationalBase:a.value.selectedOperationalBase,experienceLocation:b()[0],title:"",description:"",bokunId:0,bokunProductCode:"",customisedStartTime:!1,minAge:0,difficulty:C.EASY,distanceHikedInMeters:0,distanceDrivenInMeters:0,durationInMinutes:0,allowVehicles:!0}))}),(n,s)=>{const F=R("RouterLink");return r(),c(j,null,{default:_(()=>[e("div",te,[e("div",oe,[i(v)(i(u).createExperience)?(r(),c(w,{key:0,class:"h-5 w-5 text-blue-500"})):(r(),c(F,{key:1,to:{name:n.$Routes.Experiences}},{default:_(()=>[p(W,{class:"h-5 w-5 fill-red-400"})]),_:1},8,["to"]))]),e("form",{id:"create_experience_form",ref_key:"createExperienceFormElement",ref:I,class:"w-full space-y-8 divide-y divide-gray-200 px-6 md:px-12"},[se,e("div",ie,[e("div",null,[re,p(X,{"department-permissions-required":[i($).VIEW_EXPERIENCES],"filter-by-operational-bases":"","filter-state":a.value,onFilterStateUpdated:P},null,8,["department-permissions-required","filter-state"])]),t.value?(r(),d(h,{key:0},[e("div",null,[le,e("div",ae,[l(e("input",{id:"experience_title","onUpdate:modelValue":s[0]||(s[0]=o=>t.value.title=o),placeholder:"Eg. Glacier Wonders",type:"text",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",required:""},null,512),[[m,t.value.title]])])]),e("div",null,[ne,e("div",de,[l(e("textarea",{id:"experience_description","onUpdate:modelValue":s[1]||(s[1]=o=>t.value.description=o),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[m,t.value.description]])])]),e("div",me,[e("div",null,[ue,e("div",ce,[l(e("input",{id:"bokun_id","onUpdate:modelValue":s[2]||(s[2]=o=>t.value.bokunId=o),placeholder:"Eg. 17340",type:"number",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",required:""},null,512),[[m,t.value.bokunId]])])]),e("div",null,[pe,e("div",fe,[l(e("input",{id:"bokun_product_code","onUpdate:modelValue":s[3]||(s[3]=o=>t.value.bokunProductCode=o),placeholder:"Eg. GG-GW",type:"text",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",required:""},null,512),[[m,t.value.bokunProductCode]])])]),e("div",null,[be,e("div",_e,[l(e("select",{id:"customised_start_time","onUpdate:modelValue":s[4]||(s[4]=o=>t.value.customisedStartTime=o),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},ge,512),[[y,t.value.customisedStartTime]])])]),e("div",null,[ye,e("div",he,[l(e("input",{id:"min_age","onUpdate:modelValue":s[5]||(s[5]=o=>t.value.minAge=o),type:"number",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",required:""},null,512),[[m,t.value.minAge]])])]),e("div",null,[ke,e("div",we,[l(e("select",{id:"difficulty","onUpdate:modelValue":s[6]||(s[6]=o=>t.value.difficulty=o),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},[(r(!0),d(h,null,V(i(Z),o=>(r(),d("option",{key:o},B(o),1))),128))],512),[[y,t.value.difficulty]])])]),e("div",null,[Ee,e("div",Ie,[l(e("input",{id:"distance_hiked_in_meters","onUpdate:modelValue":s[7]||(s[7]=o=>t.value.distanceHikedInMeters=o),type:"number",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",required:""},null,512),[[m,t.value.distanceHikedInMeters]])])]),e("div",null,[Ve,e("div",Be,[l(e("input",{id:"distance_driven_in_meters","onUpdate:modelValue":s[8]||(s[8]=o=>t.value.distanceDrivenInMeters=o),type:"number",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",required:""},null,512),[[m,t.value.distanceDrivenInMeters]])])]),e("div",null,[De,e("div",Ce,[l(e("select",{id:"experience_location_id","onUpdate:modelValue":s[9]||(s[9]=o=>t.value.experienceLocation=o),class:k(["block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",{"bg-gray-200 bg-none":i(b)().length===1}]),disabled:i(v)(i(E).getAllExperienceLocationsByOperationalBaseId)||i(b)().length===1,required:""},[(r(!0),d(h,null,V(i(b)(),o=>(r(),d("option",{key:o.id,value:o},B(o.name),9,Ae))),128))],10,Se),[[y,t.value.experienceLocation]]),i(v)(i(E).getAllExperienceLocationsByOperationalBaseId)?(r(),d("div",Me,[p(w,{class:"h-3 w-3 text-gray-500"})])):x("",!0)])]),e("div",null,[Ue,e("div",Le,[l(e("input",{id:"duration_in_minutes","onUpdate:modelValue":s[10]||(s[10]=o=>t.value.durationInMinutes=o),type:"number",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",required:""},null,512),[[m,t.value.durationInMinutes]])])]),e("div",null,[Oe,e("div",qe,[p(i(ee),{modelValue:t.value.allowVehicles,"onUpdate:modelValue":s[11]||(s[11]=o=>t.value.allowVehicles=o),class:k(["relative inline-flex h-6 w-11 items-center rounded-full",t.value.allowVehicles?"bg-green-600":"bg-gray-200"])},{default:_(()=>[e("span",{class:k([t.value.allowVehicles?"translate-x-6":"translate-x-1","inline-block h-4 w-4 rounded-full bg-white transition"])},null,2)]),_:1},8,["modelValue","class"])])])])],64)):x("",!0)]),t.value?(r(),d("div",Pe,[e("div",Fe,[p(D,{name:"alert"},{default:_(()=>[i(M)(i(u).createExperience)?(r(),c(K,{key:0,action:i(u).createExperience},null,8,["action"])):x("",!0)]),_:1}),p(D,{name:"alert"},{default:_(()=>[i(A)(i(u).createExperience)?(r(),c(Q,{key:0,action:i(u).createExperience},null,8,["action"])):x("",!0)]),_:1}),e("div",Te,[e("button",{class:"ml-3 inline-flex h-9 items-center justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm focus:outline-none hover:bg-blue-700",onClick:H(q,["prevent"])},[i(v)(i(u).createExperience)?(r(),c(w,{key:1,class:"h-3 w-3 text-white"})):(r(),d("span",Ne," Save Experience "))])])])])):x("",!0)],512)])]),_:1})}}});Re.__docgenInfo={exportName:"default",displayName:"Create",description:"",tags:{},sourceFiles:["D:/work/server/htdocs/aa-portal.is/src/pages/experiences/Create.vue"]};export{Re as default};
